(()=>{"use strict";var t={55:function(t,e,o){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(o(373)),i=s(o(388));class a extends r.default{constructor(t){super(t),this.canvasSize={height:500,width:500},this.controller=new AbortController,this.signal=this.controller.signal}display(){this.root.innerHTML='\n            <section class="screen-game">\n                <h1>Graph to Plain!</h1>\n                <canvas id="game_playground"></canvas>\n                <p id="info"></p>\n            </section>',this.gameScreen=document.getElementById("game_playground");const{height:t,width:e}=this.canvasSize;this.gameScreen.height=t,this.gameScreen.width=e,new i.default(this.gameScreen,this.root)}}e.default=a},108:function(t,e,o){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(267),i=s(o(373));class a extends i.default{constructor(t){super(t)}display(){this.root.innerHTML='\n            <section class="screen-result">\n                <h2>結果</h2>\n\n                \x3c!-- 概要カード --\x3e\n                <article id="result-summary" aria-busy="true">\n                    \x3c!-- タイトル・要約などを動的に挿入 --\x3e\n                </article>\n\n                \x3c!-- メトリクス（任意数のKPIを自由に表示） --\x3e\n                <h3>メトリクス</h3>\n                <table id="result-metrics">\n                    <thead>\n                        <tr><th>項目</th><th>値</th></tr>\n                    </thead>\n                    <tbody>\n                        \x3c!-- 動的に挿入 --\x3e\n                    </tbody>\n                </table>\n\n                \x3c!-- セクション（任意数、配列で増減可能） --\x3e\n                <div id="result-sections">\n                    \x3c!-- 動的に <article> や <details> を追加 --\x3e\n                </div>\n\n                <footer style="margin-top:1rem;">\n                    <button type="button" id="btn_retry">もう一度</button>\n                    <button type="button" id="btn_backtitle" class="secondary">タイトルへ</button>\n                </footer>\n            </section>',document.getElementById("btn_retry").addEventListener("click",()=>{r.manager.goto("game")}),document.getElementById("btn_backtitle").addEventListener("click",()=>{r.manager.goto("title")})}}e.default=a},267:function(t,e,o){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.manager=void 0;const r=s(o(506)),i=document.getElementById("page");e.manager=new r.default(i,"title")},373:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.root=t}display(){this.root.innerText="DEFAULT PAGE"}}},388:function(t,e,o){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(267),i=s(o(395)),a=o(735),n=o(731),h=s(o(724));e.default=class{constructor(t,e){this.canvas=t,this.root=e,this.events=[];const o=this.canvas.getBoundingClientRect();this.canvasOrigin={y:o.top,x:o.left},this.controller=new AbortController,this.signal=this.controller.signal;const s=t.getContext("2d");this.stopwatch=new n.NeonStopwatch(s,t.width-180-10,t.height-48-10,180,48);const i=r.manager.state.settings.cntNode,l=this.createPlaneGraph("LeftRight",t,i);l.loop(0),this.settingCanvasEvent(l),this.timer=new a.Timer(60,e=>{var o;s.clearRect(0,0,t.height,t.width),(0,h.default)(s,{height:t.height,width:t.width}),l.loop(e),null===(o=this.stopwatch)||void 0===o||o.draw(e)})}createPlaneGraph(t,e,o){if("LeftRight"===t)return(new i.default).create(e,o)}settingCanvasEvent(t){this.setEvent(this.canvas,"mousedown",e=>{const o=e.clientX-this.canvasOrigin.x,s=e.clientY-this.canvasOrigin.y;t.setNodePos("down",{x:o,y:s})},{signal:this.signal}),this.setEvent(this.root,"mousemove",e=>{const o=e.clientX-this.canvasOrigin.x,s=e.clientY-this.canvasOrigin.y;t.setNodePos("move",{x:o,y:s})}),this.setEvent(this.root,"mouseup",()=>{t.setNodePos("up",{x:-1,y:-1}),t.checkCrossedGraph()||this.finishGame(t)})}setEvent(t,e,o,s){s?(t.addEventListener(e,o,s),this.events.push([t,e,o,s])):(t.addEventListener(e,o),this.events.push([t,e,o,null]))}finishGame(t){var e;this.controller.abort(),null===(e=this.timer)||void 0===e||e.abort(),t.drawClearedGraph();for(const t of this.events)t[3]?t[0].removeEventListener(t[1],t[2],t[3]):t[0].removeEventListener(t[1],t[2]);r.manager.state.result.timeMs=-1,r.manager.goto("result")}}},395:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=o(632);e.default=class{create(t,e){const o=new s.Graph(t),r=t.getContext("2d"),i=e;let a=null;for(let t=0;t<i;t++){let e=460*Math.random()+20,i=460*Math.random()+20;const n=new s.GraphNode(r,e,i,t);o.addGraphElement(n),0==this.getRandint(0,2)&&null!=a&&o.addGraphElement(new s.GraphEdge(r,a,n)),a=n}const n=o.getNodes(),h=this.createPlanegraphEdges(i);for(const t of h)o.addGraphElement(new s.GraphEdge(r,n[t[0]],n[t[1]]));return o}createPlanegraphEdges(t){let e=[],o=[],s=0;for(;s<1e3;){const r=0==this.getRandint(0,2),i=this.getRandint(0,t-2),a=[i,this.getRandint(i+2,t)];if(r&&this.checkCrossing(e,a))e.push(a);else{if(!this.checkCrossing(o,a)){s++;continue}o.push(a)}s=0}return console.log(e.sort()),console.log("-----"),console.log(o.sort()),e.concat(o)}checkCrossing(t,e){for(const o of t){const t=o[0]<=e[0]&&e[1]<=o[1],s=e[0]<=o[0]&&o[1]<=e[1];if(e[0]==o[0]&&o[1]==e[1]||!t&&!s)return!1}return!0}getRandint(t,e){if(t>e){const o=t;t=e,e=o}return Math.floor(Math.random()*(e-t))+t}}},506:function(t,e,o){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(o(749)),i=s(o(55)),a=s(o(108)),n=s(o(373));e.default=class{constructor(t,e){this.root=t,this.state={settings:{cntNode:10},result:{timeMs:-1}},this.curPage=new n.default(t),e&&this.goto(e)}goto(t){switch(t){case"title":this.curPage=new r.default(this.root);break;case"game":this.curPage=new i.default(this.root);break;case"result":this.curPage=new a.default(this.root)}this.curPage.display()}}},613:(t,e)=>{function o(t,e){return t+Math.random()*(e-t)}function s(t,e){if(t.startsWith("#")){const o=t.substring(1),s=parseInt(3===o.length?o.split("").map(t=>t+t).join(""):o,16);return`rgba(${s>>16&255},${s>>8&255},${255&s},${e.toFixed(3)})`}return t.replace(/rgba?\(([^)]+)\)/,(t,o)=>{const s=o.split(",").map(t=>t.trim()),[r,i,a]=s;return`rgba(${r},${i},${a},${e.toFixed(3)})`})}Object.defineProperty(e,"__esModule",{value:!0}),e.SparkRenderer=void 0,e.SparkRenderer=class{constructor(){this.sparks=[],this.tmpGradCanvas=null,this.tmpShadowCanvas=null,this.prevTime=-1,this._ctx=void 0,this.sparkStyle={color:"#ffdd00",glow:"rgba(255, 255, 255, 0.95)",count:2,speedMin:15,speedMax:20,lifeMin:.1,lifeMax:.3,drag:.9,width:2,glowRadius:3,shadowRadius:25,len:8}}set ctx(t){this._ctx=t}emit(t,e){const s=this.sparkStyle;for(let r=0;r<s.count;r++){const r=Math.random()*Math.PI*2,i=o(s.speedMin,s.speedMax);this.sparks.push({x:t,y:e,vx:Math.cos(r)*i,vy:Math.sin(r)*i,t:0,life:o(s.lifeMin,s.lifeMax)})}this._ctx&&this.drawShadow(this._ctx,t,e,s.shadowRadius)}update(t){if(-1==this.prevTime)return void(this.prevTime=t);const e=t-this.prevTime;this.prevTime=t;const o=this.sparkStyle;for(let t=this.sparks.length-1;t>=0;t--){const s=this.sparks[t];s.t+=e,s.t>=s.life?this.sparks.splice(t,1):(s.vx*=o.drag,s.vy*=o.drag,s.x+=s.vx*e,s.y+=s.vy*e)}}draw(){const t=this._ctx;if(!t)throw new Error("描画先が設定されていません");if(0===this.sparks.length)return;const e=this.sparkStyle;t.save(),t.globalCompositeOperation="lighter",t.lineCap="round",t.lineWidth=e.width;for(const o of this.sparks){const r=1-o.t/o.life,i=Math.min(e.len,60*o.life),a=o.x-(0!==o.vx||0!==o.vy?o.vx/(Math.hypot(o.vx,o.vy)||1)*i:0),n=o.y-(0!==o.vy||0!==o.vx?o.vy/(Math.hypot(o.vx,o.vy)||1)*i:0);t.strokeStyle=s(e.color,.8*r),t.beginPath(),t.moveTo(a,n),t.lineTo(o.x,o.y),t.stroke(),this.drawGlow(t,o.x,o.y,e.glowRadius,Math.min(1,1.2*r))}t.restore()}drawGlow(t,e,o,s,r){if(!this.tmpGradCanvas){const t=document.createElement("canvas");t.width=t.height=64;const e=t.getContext("2d"),o=e.createRadialGradient(32,32,0,32,32,24);o.addColorStop(0,"rgba(255,255,255,1)"),o.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=o,e.beginPath(),e.arc(32,32,24,0,2*Math.PI),e.fill(),this.tmpGradCanvas=t}t.save(),t.globalCompositeOperation="lighter",t.globalAlpha=r,t.drawImage(this.tmpGradCanvas,e-s,o-s,2*s,2*s),t.globalAlpha=1,t.restore()}drawShadow(t,e,o,s){if(!this.tmpShadowCanvas){const t=document.createElement("canvas");t.width=t.height=64;const e=t.getContext("2d"),o=e.createRadialGradient(32,32,0,32,32,24);o.addColorStop(0,"rgba(22, 22, 22, 0.8)"),o.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=o,e.beginPath(),e.arc(32,32,24,0,2*Math.PI),e.fill(),this.tmpShadowCanvas=t}t.save(),t.globalCompositeOperation="source-over",t.drawImage(this.tmpShadowCanvas,e-s,o-s,2*s,2*s),t.restore()}}},632:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.GraphEdge=e.GraphNode=void 0;const s=o(613);class r{loop(t){}}class i extends r{constructor(t,e,o,s){super(),this.lastDragedTime=-1,this.prevStatus="normal",this.status="normal",this.graphicGlow=document.createElement("canvas"),this.graphicShadow=document.createElement("canvas"),this.nodeColor={core:"#00e5ff",ring:"#0083c4",glowInner:"rgba(0,229,255,0.85)",glowOuter:"rgba(0,229,255,0.0)"},this.nodeStyle={radius:18,ringWidth:5,glowRadius:30,pulse:!0,pulsePeriodMS:2e3},this.ctx=t,this.center_x=e,this.center_y=o,this.id=s;const{glowInner:r,glowOuter:i}=this.nodeColor,{radius:a,glowRadius:n}=this.nodeStyle;this.graphicGlow.height=2*n,this.graphicGlow.width=2*n;const h=n,l=n,d=this.graphicGlow.getContext("2d"),c=d.createRadialGradient(h,l,0,h,l,n);c.addColorStop(0,r),c.addColorStop(1,i),d.fillStyle=c,d.beginPath(),d.arc(h,l,n,0,2*Math.PI),d.fill(),this.graphicShadow.height=2*n,this.graphicShadow.width=2*n;const g=this.graphicShadow.getContext("2d"),u=g.createRadialGradient(h,l,0,h,l,n);u.addColorStop(0,"rgba(255,225,255,0)"),u.addColorStop(.15,"rgba(255,225,255,0.02)"),u.addColorStop(1,"rgba(255,225,255,0.7)"),g.fillStyle=u,g.beginPath(),g.arc(h,l,a,0,2*Math.PI),g.fill()}getPos(){return[this.center_x,this.center_y]}setPos(t,e){this.center_x=t,this.center_y=e}getDist(t,e){return Math.sqrt((this.center_x-t)**2+(e-this.center_y)**2)}loop(t){"drag"==this.prevStatus&&"normal"==this.status&&(this.lastDragedTime=t),this.prevStatus=this.status,this.draw(t)}draw(t){const e=this.ctx,o=this.center_x,s=this.center_y,{core:r,ring:i}=this.nodeColor,{radius:a,ringWidth:n,glowRadius:h,pulse:l,pulsePeriodMS:d}=this.nodeStyle,c=l?1+.1*Math.cos((t-this.lastDragedTime)/d*Math.PI*2):1,g=h*("drag"===this.status?1.1:c);e.save(),e.globalCompositeOperation="lighter",e.drawImage(this.graphicGlow,o-g,s-g,2*g,2*g),e.restore(),e.fillStyle=r,this.ctx.beginPath(),this.ctx.arc(o,s,a,0,2*Math.PI),this.ctx.fill(),e.strokeStyle=i,e.lineWidth=n,e.beginPath(),e.arc(o,s,.375*a+n,0,2*Math.PI),e.stroke(),e.save(),e.globalCompositeOperation="lighter",e.drawImage(this.graphicShadow,o-h,s-h,2*h,2*h),e.restore()}}e.GraphNode=i;class a extends r{constructor(t,e,o){super(),this.status="normal",this.normalStyle={coreAlpha:.3,coreWidth:1,colorWidth:3,solvedBoost:1.2,dash:{pattern:[7,7],speed:10},bright:{span:200,speed:100,colorBright:"#40efffff",colorDim:"#00262bff"}},this.alertStyle={coreAlpha:.3,coreWidth:1,colorWidth:3,solvedBoost:1.2,dash:{pattern:[7,7],speed:0},bright:{span:200,speed:0,colorBright:"#926900ff",colorDim:"#926900ff"}},this.ctx=t,this.node1=e,this.node2=o}loop(t){this.draw(t)}draw(t){const[e,o]=this.node1.getPos(),[s,r]=this.node2.getPos(),{coreAlpha:i,coreWidth:a,colorWidth:n,solvedBoost:h,dash:l,bright:d}="alert"==this.status?this.alertStyle:this.normalStyle,c=this.ctx;c.save();const g=Math.atan2(r-o,s-e);c.globalCompositeOperation="lighter",c.translate(e,o),c.rotate(g);const u=Math.sqrt((s-e)*(s-e)+(r-o)*(r-o)),p=c.createLinearGradient(0,0,u,0),f=t/1e3*d.speed,m=f-Math.floor(f/d.span)*d.span;for(let t=0;;t++){if(d.span/2*t-m>u){const e=t-1,o=Math.round((1-(d.span/2*e-m)/u)/(d.span/2/u)*100);e%2==0?p.addColorStop(1,`color-mix(in srgb, ${d.colorBright} ${o}%, ${d.colorDim})`):p.addColorStop(1,`color-mix(in srgb, ${d.colorDim} ${o}%, ${d.colorBright})`);break}if(d.span/2*t-m<0){if(0<=d.span/2*(t+1)-m){const e=Math.round(-(d.span/2*t-m)/u/(d.span/2/u)*100);t%2==0?p.addColorStop(0,`color-mix(in srgb, ${d.colorBright} ${e}%, ${d.colorDim})`):p.addColorStop(0,`color-mix(in srgb, ${d.colorDim} ${e}%, ${d.colorBright})`)}}else p.addColorStop((d.span/2*t-m)/u,t%2==0?d.colorDim:d.colorBright)}c.fillStyle=p,c.fillRect(0,-n*h/2,u,n*h),c.restore(),c.save(),c.strokeStyle="#0b0f1a",c.lineWidth=n*h*1.2,c.lineDashOffset=-t/1e3*l.speed,c.setLineDash(l.pattern),this.strokeLine(c,e,o,s,r),c.restore(),c.save(),c.globalCompositeOperation="source-over",c.strokeStyle=`rgba(255,255,255,${i})`,c.lineWidth=a,this.strokeLine(c,e,o,s,r),c.restore()}strokeLine(t,e,o,s,r){t.beginPath(),t.moveTo(e,o),t.lineTo(s,r),t.stroke()}checkCrossed(t){const[e,o]=this.node1.getPos(),[s,r]=this.node2.getPos(),[i,a]=t.node1.getPos(),[n,h]=t.node2.getPos();if(((e-s)*(a-o)-(o-r)*(i-e))*((e-s)*(h-o)-(o-r)*(n-e))>0)return null;if(((i-n)*(o-a)-(a-h)*(e-i))*((i-n)*(r-a)-(a-h)*(s-i))>0)return null;const l=((o-h)*(i-n)-(e-n)*(a-h))/((o-r)*(i-n)-(e-s)*(a-h));return{y:l*(r-o)+o,x:l*(s-e)+e}}checkNeighbor(t){return this.node1==t.node1||this.node1==t.node2||this.node2==t.node1||this.node2==t.node2}}e.GraphEdge=a,e.Graph=class{constructor(t){this.canvas=t,this.graphNodes=[],this.graphEdges=[],this.spackRenderer=new s.SparkRenderer,this.mouseStartX=0,this.mouseStartY=0,this.nodeStartX=0,this.nodeStartY=0,this.operatedNode=null,this.isDrag=!1;const e=t.getContext("2d");this.ctx=e,this.spackRenderer.ctx=e,this.canvasSize={h:t.height,w:t.width}}getNodes(){return this.graphNodes}getCtx(){return this.ctx}addGraphElement(t){t instanceof i?this.graphNodes.push(t):t instanceof a&&this.graphEdges.push(t)}setNodePos(t,e){var o,s;const r=e.x,i=e.y;switch(t){case"down":if(this.mouseStartX=r,this.mouseStartY=i,this.operatedNode=this.getClosestNode(r,i),!this.operatedNode)return;this.operatedNode.status="drag";const t=null===(o=this.operatedNode)||void 0===o?void 0:o.getPos();null!=t&&(this.nodeStartX=t[0],this.nodeStartY=t[1]),this.isDrag=!0;break;case"move":if(!this.isDrag)return;const e=Math.min(Math.max(r-this.mouseStartX+this.nodeStartX,18),this.canvasSize.w-18),a=Math.min(Math.max(i-this.mouseStartY+this.nodeStartY,18),this.canvasSize.h-18);null===(s=this.operatedNode)||void 0===s||s.setPos(e,a);break;case"up":if(!this.isDrag)return;this.operatedNode&&(this.operatedNode.status="normal"),this.isDrag=!1}console.log(t)}updateEdgeStatus(){const t=this.checkCrossedEdges(),e=this.graphEdges.length;for(let o=0;o<e;o++)this.graphEdges[o].status=t[o]?"alert":"normal"}checkCrossedGraph(){return!this.checkCrossedEdges().every(t=>!t)}checkCrossedEdges(){const t=this.graphEdges.length;let e=Array(t).fill(!1);for(let o=0;o<t;o++)for(let s=o+1;s<t;s++)this.graphEdges[o].checkNeighbor(this.graphEdges[s])||this.graphEdges[o].checkCrossed(this.graphEdges[s])&&(e[o]=!0,e[s]=!0);return e}culEdgeIntersection(){const t=this.graphEdges.length;let e=[];for(let o=0;o<t;o++)for(let s=o+1;s<t;s++){if(this.graphEdges[o].checkNeighbor(this.graphEdges[s]))continue;const t=this.graphEdges[o].checkCrossed(this.graphEdges[s]);t&&e.push(t)}return e}loop(t){this.updateEdgeStatus(),this.draw(t)}draw(t){for(const e of this.graphEdges)e.loop(t);this.drawSpark(t);for(const e of this.graphNodes)e.loop(t)}drawSpark(t){const e=this.culEdgeIntersection();for(const t of e){const{x:e,y:o}=t;this.spackRenderer.emit(e,o)}this.spackRenderer.update(t/1e3),this.spackRenderer.draw()}getClosestNode(t,e){let o=1/0,s=null;for(const r of this.graphNodes){const i=r.getDist(t,e);console.log(`${r.id} ${i}`),o>i&&(o=i,s=r)}return s}drawClearedGraph(){console.log("fin")}}},724:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){const a=e.height/2,n=e.width/2,{height:h,width:l}=e,{grid:d,color:c,lineWidth:g}=s;if(!t)throw new Error("Property is unsetted");t.fillStyle=o,t.fillRect(0,0,l,h);for(let e=0;n+d.width*e<=l;e++)r(n+d.width*e,c,g,h,t);for(let e=1;n-d.width*e>=0;e++)r(n-d.width*e,c,g,h,t);for(let e=0;a+d.height*e<=h;e++)i(a+d.height*e,c,g,l,t);for(let e=1;a-d.height*e>=0;e++)i(a-d.height*e,c,g,l,t)};const o="#0b0f1a",s={grid:{height:80,width:80},color:"#111829",lineWidth:1};function r(t,e,o,s,r){r.strokeStyle=e,r.lineWidth=o,r.beginPath(),r.moveTo(t,0),r.lineTo(t,s),r.stroke()}function i(t,e,o,s,r){r.strokeStyle=e,r.lineWidth=o,r.beginPath(),r.moveTo(0,t),r.lineTo(s,t),r.stroke()}},731:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NeonStopwatch=void 0;class o{constructor(t,e,o,s,r){this.stopwatchStyle={textSize:56,bgColor:"rgba(0, 45, 63, 0.6)",bgStrokeColor:"rgba(81, 238, 255, 0.95)",bgStrokeColorDim:"rgba(0, 229, 255, 0.25)",textColor:"rgba(81, 238, 255, 0.95)",glareColor:"rgba(255,255,255,0.08)",gridColor:"rgba(0, 229, 255, 0.06)"},this.x=e,this.y=o,this.w=s,this.h=r,this.ctx=t,this.off=document.createElement("canvas"),this.off.width=2*s,this.off.height=2*r;const i=this.off.getContext("2d",{alpha:!0});this.offCtx=i}static format(t){const e=Math.floor(t/10)%100,o=Math.floor(t/1e3)%60,s=Math.floor(t/6e4);if(s>99)return["99","99","99"];const r=t=>t<10?"0"+t:""+t;return[r(s),r(o),r(e)]}draw(t,e=performance.now()){const s=this.ctx,{textSize:r,bgColor:i,bgStrokeColor:a,textColor:n}=this.stopwatchStyle,h=this.offCtx,l=this.off.width,d=this.off.height;h.clearRect(0,0,this.off.width,this.off.height),this.drawGrid(h,0,0,l,d,16);const c=Math.min(.45*d,18);this.drawFrame(h,0,0,l,d,c),h.save(),h.font=`400 ${r}px "Quadaptor", ui-monospace, monospace`,h.fillStyle=n;const g=l/2,u=d/2;this.drawTimerDigits(h,o.format(t),g,u,.7*r);const{x:p,y:f,w:m,h:v}=this;s.save(),s.globalCompositeOperation="lighter",s.drawImage(this.off,p,f,m,v),s.restore()}drawGrid(t,e,o,s,r,i){const{gridColor:a}=this.stopwatchStyle;t.save(),t.strokeStyle=a,t.lineWidth=1,t.beginPath();for(let a=Math.floor(e/i)*i;a<e+s;a+=i)t.moveTo(a+.5,o),t.lineTo(a+.5,o+r);for(let a=Math.floor(o/i)*i;a<o+r;a+=i)t.moveTo(e,a+.5),t.lineTo(e+s,a+.5);t.stroke(),t.restore()}drawScanline(t,e,o,s,r,i){t.save(),t.beginPath(),this.drawFrame(t,e,o,s,r,Math.min(.45*r,18)),t.clip();const a=t.createLinearGradient(0,o,0,o+r);a.addColorStop(0,"rgba(255,255,255,0.00)"),a.addColorStop(.15,"rgba(255,255,255,0.02)"),a.addColorStop(.5,"rgba(255,255,255,0.06)"),a.addColorStop(.85,"rgba(255,255,255,0.02)"),a.addColorStop(1,"rgba(255,255,255,0.00)");const n=i/1e3*20,h=Math.sin(n)*(.1*r);t.globalCompositeOperation="lighter",t.fillStyle=a,t.fillRect(e,o+h,s,r),t.restore()}drawTopGlare(t,e,o,s,r){const{glareColor:i}=this.stopwatchStyle;t.save(),this.drawFrame(t,e,o,s,r,Math.min(.45*r,18)),t.clip();const a=Math.max(2,.16*r),n=t.createLinearGradient(0,o,0,o+a);n.addColorStop(0,i),n.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=n,t.fillRect(e,o,s,a),t.restore()}drawFrame(t,e,o,s,r,i){const{bgColor:a,bgStrokeColor:n,bgStrokeColorDim:h}=this.stopwatchStyle;t.save(),this.drawRoundRect(t,e+4,o+4,s-8,r-8,i),t.strokeStyle=h,t.lineWidth=3,t.stroke(),this.drawRoundRect(t,e+8,o+8,s-16,r-16,i),t.fillStyle=a,t.fill(),t.strokeStyle=n,t.lineWidth=4,t.stroke(),this.drawRoundRect(t,e+20,o+20,s-40,r-40,i-6),t.strokeStyle=h,t.lineWidth=.75,t.stroke(),t.restore()}drawRoundRect(t,e,o,s,r,i){const a=Math.min(i,s/2,r/2);t.beginPath(),t.moveTo(e+a-2,o-2),t.lineTo(e+s-a,o-2),t.arcTo(e+s+2,o-2,e+s+2,o+2+a,a),t.lineTo(e+s+2,o+r+2-a),t.arcTo(e+s+2,o+r+2,e+s+2-a,o+r+2,a),t.lineTo(e+a,o+r+2),t.arcTo(e-2,o+r+2,e-2,o+r+2-a,a),t.lineTo(e-2,o-2+a),t.arcTo(e-2,o-2,e-2+a,o-2,a)}drawTimerDigits(t,e,o,s,r){const i=t.measureText(":").width,a=t.measureText(".").width,n=6*r+i+a;t.save(),t.textBaseline="middle",t.textAlign="center";let h=o-n/2+r/2;t.fillText(e[0][0],h,s),h+=r,t.fillText(e[0][1],h,s),h+=(r+i)/2,t.fillText(":",h,s),h+=(r+i)/2,t.fillText(e[1][0],h,s),h+=r,t.fillText(e[1][1],h,s),h+=(r+a)/2,t.fillText(".",h,s),h+=(r+a)/2,t.fillText(e[2][0],h,s),h+=r,t.fillText(e[2][1],h,s),t.restore()}}e.NeonStopwatch=o},735:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=void 0,e.Timer=class{constructor(t,e){this.fps=t,this.startTime=-1,this.curTime=-1,this.animationFrameId=-1,this.isAborted=!1,this.startTime=performance.now();const o=s=>{const r=s;-1==this.curTime&&(this.curTime=r),r-this.curTime>1e3/t&&(this.curTime=r,e(s)),this.animationFrameId=requestAnimationFrame(o)};this.animationFrameId=requestAnimationFrame(o)}getTime(){if(this.isAborted)throw new ReferenceError("This instance has already been aborted.");return this.curTime-this.startTime}abort(){cancelAnimationFrame(this.animationFrameId),this.isAborted=!0}}},749:function(t,e,o){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=o(267),i=s(o(373));class a extends i.default{constructor(t){super(t)}display(){this.root.innerHTML=`\n            <section class="screen-title" data-screen>\n                <h1>Planarity Challenge</h1>\n                <p>\n                    ランダムに生成された <strong>平面的グラフ</strong> を乱した配置から開始します。<br />\n                    頂点をドラッグして <em>辺の交差をなくす</em> ことを目指しましょう。\n                </p>\n\n                <form id="title-form" autocomplete="off">\n                    <fieldset>\n                        <legend>ゲーム設定</legend>\n\n                        <label for="vcount">\n                            頂点数\n                            <input\n                                id="vcount"\n                                type="number"\n                                min="6"\n                                max="60"\n                                value="${r.manager?r.manager.state.settings.cntNode:10}"\n                                required\n                            />\n                        </label>\n                    </fieldset>\n\n                    <button type="button" id="btn_gamestart">ゲーム開始</button>\n                </form>\n\n                <details id="howto">\n                    <summary>遊び方</summary>\n                    <ul>\n                        <li>頂点をドラッグして位置を調整します。</li>\n                        <li>辺どうしの交差数が <strong>0</strong> になればクリアです。</li>\n                        <li>常に「元は平面的なグラフ」を使用しますが、配置を乱して開始します。</li>\n                    </ul>\n                </details>\n            </section>`,document.getElementById("btn_gamestart").addEventListener("click",()=>{const t=Number(document.getElementById("vcount").value);r.manager.state.settings.cntNode=t,r.manager.goto("game")})}}e.default=a}},e={};!function o(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,o),i.exports}(267)})();