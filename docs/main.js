(()=>{"use strict";var t={55:function(t,e,a){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(a(373)),o=s(a(388)),r=a(267);class i extends n.default{constructor(t){super(t),this.canvasSize={height:500,width:500},this.controller=new AbortController,this.signal=this.controller.signal}display(){this.root.innerHTML='\n            <section class="screen-game">\n                <div>\n                    <h1>Planarize!</h1>\n                    <dialog id="game_modal_totitle">\n                        <article>\n                            <p>ゲームをやめてタイトルに戻りますか？</p>\n                            <footer>\n                                <button id="game_btn_totitle_yes">はい</button>\n                                <button id="game_btn_totitle_no" class="secondary">いいえ</button>\n                            </footer>\n                        </article>\n                    </dialog>\n                    <div>\n                        <button id="game_btn_back" class="game-button" data-tooltip="一手戻る">←</button>\n                        <button id="game_btn_totitle" class="game-button" data-tooltip="ゲームをやめる">×</button>\n                    </div>\n                    <canvas id="game_playground"></canvas>\n                </div>\n            </section>',this.gameScreen=document.getElementById("game_playground");const{height:t,width:e}=this.canvasSize;this.gameScreen.height=t,this.gameScreen.width=e;const a=new o.default(this.gameScreen,this.root),s=document.getElementById("game_modal_totitle");document.getElementById("game_btn_totitle").addEventListener("click",()=>{s.open=!0,a.stopTimer()}),document.getElementById("game_btn_totitle_yes").addEventListener("click",()=>{s.open=!1,r.manager.goto("title")}),document.getElementById("game_btn_totitle_no").addEventListener("click",()=>{s.open=!1,a.startTimer()}),document.getElementById("game_btn_back").addEventListener("click",()=>{a.backOneStep()})}}e.default=i},73:(t,e)=>{function a(t,e,a){return{r:Math.round(t.r+(e.r-t.r)*a),g:Math.round(t.g+(e.g-t.g)*a),b:Math.round(t.b+(e.b-t.b)*a),a:t.a+(e.a-t.a)*a}}function s(t,e=t.a){return`rgba(${t.r},${t.g},${t.b},${e})`}Object.defineProperty(e,"__esModule",{value:!0}),e.RoundLamps=void 0,e.RoundLamps=class{constructor(t,e){var a,s,n;this.current=0,this.lastLitIndex=-1,this.lastLitAt=0,this.glowCanvas=null,this.canvas=t;const o=t.getContext("2d");if(!o)throw new Error("2D context not available");this.ctx=o;const r=null!==(a=e.offColor)&&void 0!==a?a:"rgba(255,255,255,0.18)";this.opt={x:e.x,y:e.y,gap:e.gap,size:e.size,color:e.color,offColor:r,count:null!==(s=e.count)&&void 0!==s?s:5,animMs:null!==(n=e.animMs)&&void 0!==n?n:420},this.buildGlow()}setRound(t,e){const a=Math.max(0,Math.min(this.opt.count,0|t));a>this.current?(this.lastLitIndex=a-1,this.lastLitAt=e):a<this.current&&(this.lastLitIndex=-1),this.current=a}reset(){this.current=0,this.lastLitIndex=-1}fill(){this.current=this.opt.count,this.lastLitIndex=-1}draw(t=performance.now()){const{x:e,y:a,gap:s,size:n,count:o,color:r,offColor:i,animMs:l}=this.opt,d=.5*n;for(let r=0;r<o;r++){const h=e+d+r*(n+s),c=a+d,u=r<this.current,g=r===this.current&&this.current<o;let m=1,p=0;if(r===this.lastLitIndex){const e=Math.min(1,(t-this.lastLitAt)/l),a=1.70158;m=.85+.25*(1+a*Math.pow(e-1,3)+a*Math.pow(e-1,2)),p=.6*(1-e),e>=1&&(this.lastLitIndex=-1)}if(this.ctx.save(),this.ctx.lineWidth=Math.max(1,.07*n),this.ctx.strokeStyle="rgba(255,255,255,0.15)",this.ctx.beginPath(),this.ctx.arc(h,c,d*m,0,2*Math.PI),this.ctx.stroke(),this.ctx.restore(),g){const e=.5+.5*Math.sin(.008*t);this.ctx.save(),this.ctx.globalCompositeOperation="lighter",this.ctx.lineWidth=Math.max(1,.1*n),this.ctx.globalAlpha=.18+.22*e,this.ctx.strokeStyle="rgba(255, 255, 255, 0.71)",this.ctx.beginPath(),this.ctx.arc(h,c,1.18*d*m,0,2*Math.PI),this.ctx.stroke(),this.ctx.restore()}if(u||p>0){this.ctx.save(),this.ctx.globalCompositeOperation="lighter",this.ctx.globalAlpha=(u?.35:0)+p;const t=1.8*d*m;this.drawGlow(h-t,c-t,2*t,2*t),this.ctx.restore()}this.drawDecoratedCore(h,c,.74*d*m,u?this.opt.color:i,u)}}drawDecoratedCore(t,e,n,o,r){const i=this.ctx,l=i.createRadialGradient(t-.25*n,e-.25*n,.15*n,t,e,n),d=function(t){if(t.startsWith("#")){const e=t.slice(1),a=3===e.length?parseInt(e.split("").map(t=>t+t).join(""),16):parseInt(e,16);return{r:a>>16&255,g:a>>8&255,b:255&a,a:1}}const e=t.match(/rgba?\(([^)]+)\)/i);if(e){const[t,a,s,n="1"]=e[1].split(",").map(t=>t.trim());return{r:+t,g:+a,b:+s,a:+n}}return{r:255,g:255,b:255,a:1}}(o),h=s(a(d,{r:255,g:255,b:255,a:1},r?.35:.15),1),c=s(a(d,{r:0,g:0,b:0,a:1},r?.35:.15),1);l.addColorStop(0,h),l.addColorStop(.6,o),l.addColorStop(1,c),i.save(),i.fillStyle=l,i.beginPath(),i.arc(t,e,n,0,2*Math.PI),i.fill(),i.lineWidth=Math.max(1,.18*n),i.strokeStyle=s(a(d,{r:255,g:255,b:255,a:1},.5),r?.55:.35),i.beginPath(),i.arc(t,e,.82*n,0,2*Math.PI),i.stroke(),i.globalCompositeOperation="lighter";const u=1.4*n,g=.7*n;i.translate(t,e),i.rotate(-Math.PI/6);const m=i.createLinearGradient(-u/2,-g/2,u/2,g/2);m.addColorStop(0,"rgba(255,255,255,0)"),m.addColorStop(.45,"rgba(255,255,255,0.10)"),m.addColorStop(.55,"rgba(255,255,255,0.22)"),m.addColorStop(1,"rgba(255,255,255,0)"),i.fillStyle=m,i.beginPath(),i.ellipse(0,0,u,g,0,0,2*Math.PI),i.fill(),i.restore()}buildGlow(){const t=document.createElement("canvas");t.width=t.height=128;const e=t.getContext("2d"),a=e.createRadialGradient(64,64,0,64,64,56);a.addColorStop(0,"rgba(255,255,255,0.95)"),a.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=a,e.beginPath(),e.arc(64,64,56,0,2*Math.PI),e.fill(),this.glowCanvas=t}drawGlow(t,e,a,s){this.glowCanvas&&this.ctx.drawImage(this.glowCanvas,t,e,a,s)}}},108:function(t,e,a){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(267),o=s(a(373));class r extends o.default{constructor(t){super(t)}display(){const t=n.manager.state.settings.mode;if(this.root.innerHTML=`\n            <section class="screen-result">\n                <h2>結果</h2>\n\n                \x3c!-- 概要カード --\x3e\n                \x3c!-- <article id="result-summary" aria-busy="true">\n                    タイトル・要約などを動的に挿入\n                </article> --\x3e\n\n                \x3c!-- タイムアタックランキング --\x3e\n                ${"timeattack"==t?'<table class="result-metrics">\n                    <thead>\n                        <tr>\n                            <th>順位</th>\n                            <th>名前</th>\n                            <th colspan="6">タイム</th>\n                        </tr>\n                        <tr>\n                            <th></th>\n                            <th></th>\n                            <th>合計</th>\n                            <th>ラウンド１</th>\n                            <th>ラウンド２</th>\n                            <th>ラウンド３</th>\n                            <th>ラウンド４</th>\n                            <th>ラウンド５</th>\n                        </tr>\n                    </thead>\n                    <tbody>'+r.createTimeattackResultHTML(n.manager.state.settings.timeattackLevel)+"</tbody>\n                </table>":""}\n\n                \x3c!-- アーケード結果 --\x3e\n                ${"arcade"==t?'<table id="result_metrics_arcade">\n                    <thead>\n                        <tr>\n                            <th>レベル</th>\n                            <th>名前</th>\n                            <th>タイム</th>\n                        </tr>\n                    </thead>\n                    <tbody id="result_metrics_arcade_body">'+r.createArcadeResultHTML()+"</tbody>\n                </table>":""}\n\n                <footer style="margin-top:1rem;">\n                    <button type="button" id="btn_retry">もう一度</button>\n                    <button type="button" id="btn_backtitle" class="secondary">タイトルへ</button>\n                </footer>\n            </section>`,document.getElementById("btn_retry").addEventListener("click",()=>{n.manager.goto("game")}),document.getElementById("btn_backtitle").addEventListener("click",()=>{n.manager.goto("title")}),n.manager.state.settings.advMode){if(!window.localStorage)return;window.localStorage.setItem("resultsTime",JSON.stringify(n.manager.state.resultsTimeattack)),window.localStorage.setItem("resultsArcade",JSON.stringify(n.manager.state.resultsArcade))}}static createTimeattackResultHTML(t){const e=[...n.manager.state.resultsTimeattack[t]].sort((t,e)=>t.totalTimeMs-e.totalTimeMs);return e.map((t,a)=>{let s="";const n=t.timeMsByRound.length;for(let e=0;e<5;e++)s+=`<td>${e<n?r.format(t.timeMsByRound[e]):""}</td>`;return`<tr ${t.id==e.length?"style='background: rgba(160, 240, 255, 0.28);'":""}><td>${a+1}</td><td>${t.name}</td><td>${r.format(t.totalTimeMs)}</td>${s}</tr>`}).join("")}static createArcadeResultHTML(){return n.manager.state.resultsArcade.range().map((t,e)=>`<tr ${0==e?"style='background: rgba(160, 240, 255, 0.28);'":""}><td>${t.level}</td><td>${t.name}</td><td>${r.format(t.timeMs)}</td></tr>`).join("")}static format(t){const e=Math.floor(t/10)%100,a=Math.floor(t/1e3)%60,s=Math.floor(t/6e4);if(s>99)return"99:99.99";const n=t=>t<10?"0"+t:""+t;return s+":"+n(a)+"."+n(e)}}e.default=r},267:function(t,e,a){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.manager=void 0;const n=s(a(506)),o=a(763),r=document.getElementById("page");e.manager=new n.default(r),document.addEventListener("DOMContentLoaded",()=>{if(window.localStorage||console.log("localstorage非対応です"),window.localStorage.getItem("adv")){e.manager.state.settings.advMode=!0;const t=window.localStorage.getItem("resultsTime");t&&(e.manager.state.resultsTimeattack=JSON.parse(t));const a=window.localStorage.getItem("resultsArcade");if(a){const t=JSON.parse(a);e.manager.state.resultsArcade=new o.ReverseQueue(t._queue,t._size)}}e.manager.goto("title")})},373:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.root=t}display(){this.root.innerText="DEFAULT PAGE"}}},388:function(t,e,a){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(267),o=a(640),r=s(a(395)),i=s(a(591)),l=a(735),d=a(731),h=s(a(724)),c=a(73);e.default=class{constructor(t,e){this.canvas=t,this.root=e,this.curRound=1,this.events=[],this.resultTimeMsByRound=[],this.prevRoundTimeMs=0;const a=this.canvas.getBoundingClientRect();this.canvasOrigin={y:a.top,x:a.left};const s=t.getContext("2d");this.stopwatch=new d.NeonStopwatch(s,t.width-180-10,t.height-48-10,180,48),this.renderRoundLamps=new c.RoundLamps(t,{x:10,y:10,gap:10,size:25,color:"#00e5ff",offColor:"#926900"}),this.timer=new l.Timer(o.ANIMATION_FPS,e=>{var a,o;s.clearRect(0,0,t.height,t.width),(0,h.default)(t),null===(a=this.opeg)||void 0===a||a.loop(e),null===(o=this.stopwatch)||void 0===o||o.draw(e),"timeattack"==n.manager.state.settings.mode&&this.renderRoundLamps.draw(e)}),this.timer.start(),this.startGameRound()}settingCanvasEvent(t){this.controller=new AbortController,this.signal=this.controller.signal,this.setEvent(this.canvas,"mousedown",e=>{const a=e.clientX-this.canvasOrigin.x,s=e.clientY-this.canvasOrigin.y;t.setNodePos("down",{x:a,y:s})},{signal:this.signal}),this.setEvent(this.root,"mousemove",e=>{const a=e.clientX-this.canvasOrigin.x,s=e.clientY-this.canvasOrigin.y;t.setNodePos("move",{x:a,y:s})}),this.setEvent(this.root,"mouseup",()=>{t.setNodePos("up",{x:-1,y:-1}),t.checkCrossedGraph()||this.finishGameRound()})}setEvent(t,e,a,s){s?(t.addEventListener(e,a,s),this.events.push([t,e,a,s])):(t.addEventListener(e,a),this.events.push([t,e,a,null]))}startGameRound(){let t=-1;switch(n.manager.state.settings.mode){case"timeattack":t=o.CNT_NODE_TIMEATTACK[n.manager.state.settings.timeattackLevel][this.curRound];break;case"arcade":t=o.CNT_NODE_ARCADE[n.manager.state.settings.arcadeLevel]}const e=this.createPlaneGraph("Delaunay",this.canvas,t);this.settingCanvasEvent(e),this.opeg=e}createPlaneGraph(t,e,a){if(a<=0)throw RangeError("不適切な値です");let s;switch(t){case"LeftRight":s=(new r.default).create(e,a);case"Delaunay":s=(new i.default).create(e,a)}if(!s)throw Error("Unexpected Error!");let n=0;for(;s.culCntCrossedPoint()<3&&n<100;){for(const t of s.getNodes()){const e=460*Math.random()+20,a=460*Math.random()+20;t.setPos(e,a)}n++}return s}finishGameRound(){var t,e;null===(t=this.controller)||void 0===t||t.abort();for(const t of this.events)t[3]?t[0].removeEventListener(t[1],t[2],t[3]):t[0].removeEventListener(t[1],t[2]);const a=this.timer.getTime();this.resultTimeMsByRound.push(a-this.prevRoundTimeMs),this.prevRoundTimeMs=a,this.renderRoundLamps.setRound(this.curRound,a),"timeattack"==n.manager.state.settings.mode&&this.curRound==o.MAX_TIMEATTACK_ROUND||"arcade"==n.manager.state.settings.mode?("timeattack"==n.manager.state.settings.mode?n.manager.addTimeattackResult(n.manager.state.settings.timeattackLevel,n.manager.state.settings.name,a,this.resultTimeMsByRound):"arcade"==n.manager.state.settings.mode&&n.manager.addArcadeResult(n.manager.state.settings.name,n.manager.state.settings.arcadeLevel,a),null===(e=this.timer)||void 0===e||e.stop(),n.manager.goto("result")):(this.startGameRound(),this.curRound++)}startTimer(){this.timer.start()}stopTimer(){this.timer.stop()}backOneStep(){var t;null===(t=this.opeg)||void 0===t||t.backOneStep()}}},395:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=a(608);e.default=class{create(t,e){const a=new s.Graph(t),n=t.getContext("2d"),o=e;let r=null;for(let t=0;t<o;t++){const e=460*Math.random()+20,o=460*Math.random()+20,i=new s.GraphNode(n,e,o,t);a.addGraphElement(i),0==this.getRandint(0,2)&&null!=r&&a.addGraphElement(new s.GraphEdge(n,r,i)),r=i}const i=a.getNodes(),l=this.createPlanegraphEdges(o);for(const t of l)a.addGraphElement(new s.GraphEdge(n,i[t[0]],i[t[1]]));return a}createPlanegraphEdges(t){let e=[],a=[],s=0;for(;s<1e3;){const n=0==this.getRandint(0,2),o=this.getRandint(0,t-2),r=[o,this.getRandint(o+2,t)];if(n&&this.checkCrossing(e,r))e.push(r);else{if(!this.checkCrossing(a,r)){s++;continue}a.push(r)}s=0}return e.concat(a)}checkCrossing(t,e){for(const a of t){const t=a[0]<=e[0]&&e[1]<=a[1],s=e[0]<=a[0]&&a[1]<=e[1];if(e[0]==a[0]&&a[1]==e[1]||!t&&!s)return!1}return!0}getRandint(t,e){if(t>e){const a=t;t=e,e=a}return Math.floor(Math.random()*(e-t))+t}}},506:function(t,e,a){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(a(749)),o=s(a(55)),r=s(a(108)),i=s(a(373)),l=a(640),d=a(763);e.default=class{constructor(t){this.root=t,this.resultNextId={easy:1,normal:1,hard:1},this.state={settings:{advMode:!1,name:"Player",mode:"timeattack",timeattackLevel:l.DEFAULT_TIMEATTACK_LEVEL,arcadeLevel:5},resultsTimeattack:{easy:[],normal:[],hard:[]},resultsArcade:new d.ReverseQueue(void 0,50)},this.curPage=new i.default(t)}goto(t){switch(t){case"title":this.curPage=new n.default(this.root);break;case"game":this.curPage=new o.default(this.root);break;case"result":this.curPage=new r.default(this.root)}this.curPage.display()}addTimeattackResult(t,e,a,s){this.state.resultsTimeattack[t].push({id:this.resultNextId[t],name:e,totalTimeMs:a,timeMsByRound:s}),this.resultNextId[t]++}addArcadeResult(t,e,a){this.state.resultsArcade.push({name:t,level:e,timeMs:a})}}},591:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=a(608);function n(t,e,a,s){(function(t,e,a){return(e.x-t.x)*(a.y-t.y)-(e.y-t.y)*(a.x-t.x)>0})(s[t],s[e],s[a])||([e,a]=[a,e]);const{x:n,y:o}=s[t],{x:r,y:i}=s[e],{x:l,y:d}=s[a],h=2*(n*(i-d)+r*(d-o)+l*(o-i))||1e-12,c=((n*n+o*o)*(i-d)+(r*r+i*i)*(d-o)+(l*l+d*d)*(o-i))/h,u=((n*n+o*o)*(l-r)+(r*r+i*i)*(n-l)+(l*l+d*d)*(r-n))/h,g=c-n,m=u-o;return{a:t,b:e,c:a,ccx:c,ccy:u,ccr2:g*g+m*m}}function o(t,e,a){const s=t-a.ccx,n=e-a.ccy;return s*s+n*n<=a.ccr2-1e-7}function r(t){const e=(t,e)=>t<e?`${t},${e}`:`${e},${t}`,a=new Map;for(const s of t){const t=e(s.u,s.v),n=a.get(t);n?n.cnt++:a.set(t,{u:s.u,v:s.v,cnt:1})}const s=[];for(const t of a.values())1===t.cnt&&s.push({u:t.u,v:t.v});return s}e.default=class{create(t,e){const a=new s.Graph(t),i=t.getContext("2d"),l=t.clientWidth||t.width,d=t.clientHeight||t.height,h=Math.max(16,.04*Math.min(l,d)),c=[];for(let t=0;t<e;t++)c.push({x:h+Math.random()*(l-2*h),y:h+Math.random()*(d-2*h),id:t});const u=function(t){const e=1e6,a=[{x:-e,y:-e,id:-1},{x:+e,y:-e,id:-2},{x:0,y:+e,id:-3},...t];let s=[n(0,1,2,a)];for(let t=3;t<a.length;t++){const e=a[t],i=[];for(const t of s)o(e.x,e.y,t)&&i.push(t);const l=[],d=(t,e)=>l.push({u:t,v:e});for(const t of i)d(t.a,t.b),d(t.b,t.c),d(t.c,t.a);s=s.filter(t=>-1===i.indexOf(t));const h=r(l);for(const e of h){const o=n(e.u,e.v,t,a);s.push(o)}}s=s.filter(t=>t.a>=3&&t.b>=3&&t.c>=3);return s.map(t=>({a:t.a-3,b:t.b-3,c:t.c-3,ccx:t.ccx,ccy:t.ccy,ccr2:t.ccr2}))}(c),g=c.map(t=>new s.GraphNode(i,t.x,t.y,t.id));for(const t of g)a.addGraphElement(t);const m=new Set,p=(t,e)=>{if(t===e)return;const[a,s]=t<e?[t,e]:[e,t];m.add(`${a},${s}`)};for(const t of u)p(t.a,t.b),p(t.b,t.c),p(t.c,t.a);for(const t of m){const[e,n]=t.split(",").map(t=>parseInt(t,10));console.log(t);const o=new s.GraphEdge(i,g[e],g[n]);console.log(o),a.addGraphElement(o)}return a}}},608:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.GraphEdge=e.GraphNode=void 0;const s=a(613);class n{loop(t){}}class o extends n{constructor(t,e,a,s){super(),this.lastDragedTime=-1,this.prevStatus="normal",this.status="normal",this.graphicGlow=document.createElement("canvas"),this.graphicShadow=document.createElement("canvas"),this.nodeColor={core:"#00e5ff",ring:"#0083c4",glowInner:"rgba(0,229,255,0.85)",glowOuter:"rgba(0,229,255,0.0)"},this.nodeStyle={radius:18,ringWidth:5,glowRadius:30,pulse:!0,pulsePeriodMS:2e3},this.ctx=t,this.center_x=e,this.center_y=a,this.id=s;const{glowInner:n,glowOuter:o}=this.nodeColor,{radius:r,glowRadius:i}=this.nodeStyle;this.graphicGlow.height=2*i,this.graphicGlow.width=2*i;const l=i,d=i,h=this.graphicGlow.getContext("2d"),c=h.createRadialGradient(l,d,0,l,d,i);c.addColorStop(0,n),c.addColorStop(1,o),h.fillStyle=c,h.beginPath(),h.arc(l,d,i,0,2*Math.PI),h.fill(),this.graphicShadow.height=2*i,this.graphicShadow.width=2*i;const u=this.graphicShadow.getContext("2d"),g=u.createRadialGradient(l,d,0,l,d,i);g.addColorStop(0,"rgba(255,225,255,0)"),g.addColorStop(.15,"rgba(255,225,255,0.02)"),g.addColorStop(1,"rgba(255,225,255,0.7)"),u.fillStyle=g,u.beginPath(),u.arc(l,d,r,0,2*Math.PI),u.fill()}getPos(){return[this.center_x,this.center_y]}setPos(t,e){this.center_x=t,this.center_y=e}getDist(t,e){return Math.sqrt((this.center_x-t)**2+(e-this.center_y)**2)}loop(t){"drag"==this.prevStatus&&"normal"==this.status&&(this.lastDragedTime=t),this.prevStatus=this.status,this.draw(t)}draw(t){const e=this.ctx,a=this.center_x,s=this.center_y,{core:n,ring:o}=this.nodeColor,{radius:r,ringWidth:i,glowRadius:l,pulse:d,pulsePeriodMS:h}=this.nodeStyle,c=d?1+.1*Math.cos((t-this.lastDragedTime)/h*Math.PI*2):1,u=l*("drag"===this.status?1.1:c);e.save(),e.globalCompositeOperation="lighter",e.drawImage(this.graphicGlow,a-u,s-u,2*u,2*u),e.restore(),e.fillStyle=n,this.ctx.beginPath(),this.ctx.arc(a,s,r,0,2*Math.PI),this.ctx.fill(),e.strokeStyle=o,e.lineWidth=i,e.beginPath(),e.arc(a,s,.375*r+i,0,2*Math.PI),e.stroke(),e.save(),e.globalCompositeOperation="lighter",e.drawImage(this.graphicShadow,a-l,s-l,2*l,2*l),e.restore()}}e.GraphNode=o;class r extends n{constructor(t,e,a){super(),this.status="normal",this.normalStyle={coreAlpha:.3,coreWidth:1,colorWidth:3,solvedBoost:1.2,dash:{pattern:[7,7],speed:10},bright:{span:200,speed:100,colorBright:"#40efffff",colorDim:"#00262bff"}},this.alertStyle={coreAlpha:.3,coreWidth:1,colorWidth:3,solvedBoost:1.2,dash:{pattern:[7,7],speed:0},bright:{span:200,speed:0,colorBright:"#926900ff",colorDim:"#926900ff"}},this.ctx=t,this.node1=e,this.node2=a}loop(t){this.draw(t)}draw(t){const[e,a]=this.node1.getPos(),[s,n]=this.node2.getPos(),{coreAlpha:o,coreWidth:r,colorWidth:i,solvedBoost:l,dash:d,bright:h}="alert"==this.status?this.alertStyle:this.normalStyle,c=this.ctx;c.save();const u=Math.atan2(n-a,s-e);c.globalCompositeOperation="lighter",c.translate(e,a),c.rotate(u);const g=Math.sqrt((s-e)*(s-e)+(n-a)*(n-a)),m=c.createLinearGradient(0,0,g,0),p=t/1e3*h.speed,f=p-Math.floor(p/h.span)*h.span;for(let t=0;;t++){if(h.span/2*t-f>g){const e=t-1,a=Math.round((1-(h.span/2*e-f)/g)/(h.span/2/g)*100);e%2==0?m.addColorStop(1,`color-mix(in srgb, ${h.colorBright} ${a}%, ${h.colorDim})`):m.addColorStop(1,`color-mix(in srgb, ${h.colorDim} ${a}%, ${h.colorBright})`);break}if(h.span/2*t-f<0){if(0<=h.span/2*(t+1)-f){const e=Math.round(-(h.span/2*t-f)/g/(h.span/2/g)*100);t%2==0?m.addColorStop(0,`color-mix(in srgb, ${h.colorBright} ${e}%, ${h.colorDim})`):m.addColorStop(0,`color-mix(in srgb, ${h.colorDim} ${e}%, ${h.colorBright})`)}}else m.addColorStop((h.span/2*t-f)/g,t%2==0?h.colorDim:h.colorBright)}c.fillStyle=m,c.fillRect(0,-i*l/2,g,i*l),c.restore(),c.save(),c.strokeStyle="#0b0f1a",c.lineWidth=i*l*1.2,c.lineDashOffset=-t/1e3*d.speed,c.setLineDash(d.pattern),this.strokeLine(c,e,a,s,n),c.restore(),c.save(),c.globalCompositeOperation="source-over",c.strokeStyle=`rgba(255,255,255,${o})`,c.lineWidth=r,this.strokeLine(c,e,a,s,n),c.restore()}strokeLine(t,e,a,s,n){t.beginPath(),t.moveTo(e,a),t.lineTo(s,n),t.stroke()}checkCrossed(t){const[e,a]=this.node1.getPos(),[s,n]=this.node2.getPos(),[o,r]=t.node1.getPos(),[i,l]=t.node2.getPos();if(((e-s)*(r-a)-(a-n)*(o-e))*((e-s)*(l-a)-(a-n)*(i-e))>0)return null;if(((o-i)*(a-r)-(r-l)*(e-o))*((o-i)*(n-r)-(r-l)*(s-o))>0)return null;const d=((a-l)*(o-i)-(e-i)*(r-l))/((a-n)*(o-i)-(e-s)*(r-l));return{y:d*(n-a)+a,x:d*(s-e)+e}}checkNeighbor(t){return this.node1==t.node1||this.node1==t.node2||this.node2==t.node1||this.node2==t.node2}}e.GraphEdge=r,e.Graph=class{constructor(t){this.canvas=t,this.graphNodes=[],this.graphEdges=[],this._recordStep=[],this.mouseStartX=0,this.mouseStartY=0,this.nodeStartX=0,this.nodeStartY=0,this.operatedNode=null,this.isDrag=!1,this.spackRenderer=new s.SparkRenderer;const e=t.getContext("2d");this.ctx=e,this.spackRenderer.ctx=e,this.canvasSize={h:t.height,w:t.width}}getNodes(){return this.graphNodes}getCtx(){return this.ctx}addGraphElement(t){t instanceof o?this.graphNodes.push(t):t instanceof r&&this.graphEdges.push(t)}setNodePos(t,e){var a,s;const n=e.x,o=e.y;switch(t){case"down":if(this.mouseStartX=n,this.mouseStartY=o,this.operatedNode=this.getClosestNode(n,o),!this.operatedNode)return;this.operatedNode.status="drag";const t=null===(a=this.operatedNode)||void 0===a?void 0:a.getPos();null!=t&&(this.nodeStartX=t[0],this.nodeStartY=t[1]),this.isDrag=!0;break;case"move":if(!this.isDrag)return;const e=Math.min(Math.max(n-this.mouseStartX+this.nodeStartX,18),this.canvasSize.w-18),r=Math.min(Math.max(o-this.mouseStartY+this.nodeStartY,18),this.canvasSize.h-18);null===(s=this.operatedNode)||void 0===s||s.setPos(e,r);break;case"up":if(!this.isDrag)return;this.operatedNode&&(this.operatedNode.status="normal"),this.isDrag=!1,this.operatedNode&&this._recordStep.push({node:this.operatedNode,x:this.nodeStartX,y:this.nodeStartY})}}updateEdgeStatus(){const t=this.checkCrossedEdges(),e=this.graphEdges.length;for(let a=0;a<e;a++)this.graphEdges[a].status=t[a]?"alert":"normal"}checkCrossedGraph(){return!this.checkCrossedEdges().every(t=>!t)}culCntCrossedPoint(){const t=this.graphEdges.length;let e=0;for(let a=0;a<t;a++)for(let s=a+1;s<t;s++)this.graphEdges[a].checkNeighbor(this.graphEdges[s])||this.graphEdges[a].checkCrossed(this.graphEdges[s])&&e++;return e}checkCrossedEdges(){const t=this.graphEdges.length;let e=Array(t).fill(!1);for(let a=0;a<t;a++)for(let s=a+1;s<t;s++)this.graphEdges[a].checkNeighbor(this.graphEdges[s])||this.graphEdges[a].checkCrossed(this.graphEdges[s])&&(e[a]=!0,e[s]=!0);return e}culEdgeIntersection(){const t=this.graphEdges.length;let e=[];for(let a=0;a<t;a++)for(let s=a+1;s<t;s++){if(this.graphEdges[a].checkNeighbor(this.graphEdges[s]))continue;const t=this.graphEdges[a].checkCrossed(this.graphEdges[s]);t&&e.push(t)}return e}loop(t){this.updateEdgeStatus(),this.draw(t)}draw(t){for(const e of this.graphEdges)e.loop(t);this.drawSpark(t);for(const e of this.graphNodes)e.loop(t)}drawSpark(t){const e=this.culEdgeIntersection();for(const t of e){const{x:e,y:a}=t;this.spackRenderer.emit(e,a)}this.spackRenderer.update(t/1e3),this.spackRenderer.draw()}getClosestNode(t,e){let a=1/0,s=null;for(const n of this.graphNodes){const o=n.getDist(t,e);a>o&&(a=o,s=n)}return s}backOneStep(){const t=this._recordStep.pop();t&&t.node.setPos(t.x,t.y)}}},613:(t,e)=>{function a(t,e){return t+Math.random()*(e-t)}function s(t,e){if(t.startsWith("#")){const a=t.substring(1),s=parseInt(3===a.length?a.split("").map(t=>t+t).join(""):a,16);return`rgba(${s>>16&255},${s>>8&255},${255&s},${e.toFixed(3)})`}return t.replace(/rgba?\(([^)]+)\)/,(t,a)=>{const s=a.split(",").map(t=>t.trim()),[n,o,r]=s;return`rgba(${n},${o},${r},${e.toFixed(3)})`})}Object.defineProperty(e,"__esModule",{value:!0}),e.SparkRenderer=void 0,e.SparkRenderer=class{constructor(){this.sparks=[],this.tmpGradCanvas=null,this.tmpShadowCanvas=null,this.prevTime=-1,this._ctx=void 0,this.sparkStyle={color:"#ffdd00",glow:"rgba(255, 255, 255, 0.95)",count:2,speedMin:15,speedMax:20,lifeMin:.1,lifeMax:.3,drag:.9,width:2,glowRadius:3,shadowRadius:25,len:8}}set ctx(t){this._ctx=t}emit(t,e){const s=this.sparkStyle;for(let n=0;n<s.count;n++){const n=Math.random()*Math.PI*2,o=a(s.speedMin,s.speedMax);this.sparks.push({x:t,y:e,vx:Math.cos(n)*o,vy:Math.sin(n)*o,t:0,life:a(s.lifeMin,s.lifeMax)})}this._ctx&&this.drawShadow(this._ctx,t,e,s.shadowRadius)}update(t){if(-1==this.prevTime)return void(this.prevTime=t);const e=t-this.prevTime;this.prevTime=t;const a=this.sparkStyle;for(let t=this.sparks.length-1;t>=0;t--){const s=this.sparks[t];s.t+=e,s.t>=s.life?this.sparks.splice(t,1):(s.vx*=a.drag,s.vy*=a.drag,s.x+=s.vx*e,s.y+=s.vy*e)}}draw(){const t=this._ctx;if(!t)throw new Error("描画先が設定されていません");if(0===this.sparks.length)return;const e=this.sparkStyle;t.save(),t.globalCompositeOperation="lighter",t.lineCap="round",t.lineWidth=e.width;for(const a of this.sparks){const n=1-a.t/a.life,o=Math.min(e.len,60*a.life),r=a.x-(0!==a.vx||0!==a.vy?a.vx/(Math.hypot(a.vx,a.vy)||1)*o:0),i=a.y-(0!==a.vy||0!==a.vx?a.vy/(Math.hypot(a.vx,a.vy)||1)*o:0);t.strokeStyle=s(e.color,.8*n),t.beginPath(),t.moveTo(r,i),t.lineTo(a.x,a.y),t.stroke(),this.drawGlow(t,a.x,a.y,e.glowRadius,Math.min(1,1.2*n))}t.restore()}drawGlow(t,e,a,s,n){if(!this.tmpGradCanvas){const t=document.createElement("canvas");t.width=t.height=64;const e=t.getContext("2d"),a=e.createRadialGradient(32,32,0,32,32,24);a.addColorStop(0,"rgba(255,255,255,1)"),a.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=a,e.beginPath(),e.arc(32,32,24,0,2*Math.PI),e.fill(),this.tmpGradCanvas=t}t.save(),t.globalCompositeOperation="lighter",t.globalAlpha=n,t.drawImage(this.tmpGradCanvas,e-s,a-s,2*s,2*s),t.globalAlpha=1,t.restore()}drawShadow(t,e,a,s){if(!this.tmpShadowCanvas){const t=document.createElement("canvas");t.width=t.height=64;const e=t.getContext("2d"),a=e.createRadialGradient(32,32,0,32,32,24);a.addColorStop(0,"rgba(22, 22, 22, 0.8)"),a.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=a,e.beginPath(),e.arc(32,32,24,0,2*Math.PI),e.fill(),this.tmpShadowCanvas=t}t.save(),t.globalCompositeOperation="source-over",t.drawImage(this.tmpShadowCanvas,e-s,a-s,2*s,2*s),t.restore()}}},640:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ANIMATION_FPS=e.CNT_NODE_ARCADE=e.MAX_ARCADE_LEVEL=e.CNT_NODE_TIMEATTACK=e.DEFAULT_TIMEATTACK_LEVEL=e.LEVELS=e.MAX_TIMEATTACK_ROUND=void 0,e.MAX_TIMEATTACK_ROUND=5,e.LEVELS=["easy","normal","hard"],e.DEFAULT_TIMEATTACK_LEVEL="normal",e.CNT_NODE_TIMEATTACK={easy:[-1,5,5,6,6,7],normal:[-1,7,7,8,8,9],hard:[-1,8,8,9,9,10]},e.MAX_ARCADE_LEVEL=10,e.CNT_NODE_ARCADE=[-1,5,6,7,8,9,10,11,12,13,14],e.ANIMATION_FPS=60,(()=>{for(let t of e.LEVELS)if(null==e.CNT_NODE_TIMEATTACK[t])throw Error("定義が不十分です");if(e.CNT_NODE_ARCADE.length<e.MAX_ARCADE_LEVEL+1)throw Error("定義が不十分です")})()},724:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const e=t.getContext("2d"),r=t.height,i=t.width,l=r/2,d=i/2,{size:h,lineColor:c,lineWidth:u}=s;if(!e)throw new Error("Property is unsetted");e.fillStyle=a,e.fillRect(0,0,i,r);for(let t=0;d+h.width*t<=i;t++)n(d+h.width*t,c,u,r,e);for(let t=1;d-h.width*t>=0;t++)n(d-h.width*t,c,u,r,e);for(let t=0;l+h.height*t<=r;t++)o(l+h.height*t,c,u,i,e);for(let t=1;l-h.height*t>=0;t++)o(l-h.height*t,c,u,i,e)};const a="#0b0f1a",s={size:{height:80,width:80},lineColor:"#111829",lineWidth:1};function n(t,e,a,s,n){n.strokeStyle=e,n.lineWidth=a,n.beginPath(),n.moveTo(t,0),n.lineTo(t,s),n.stroke()}function o(t,e,a,s,n){n.strokeStyle=e,n.lineWidth=a,n.beginPath(),n.moveTo(0,t),n.lineTo(s,t),n.stroke()}},731:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NeonStopwatch=void 0;class a{constructor(t,e,a,s,n){this.stopwatchStyle={textSize:56,bgColor:"rgba(0, 45, 63, 0.6)",bgStrokeColor:"rgba(81, 238, 255, 0.95)",bgStrokeColorDim:"rgba(0, 229, 255, 0.25)",textColor:"rgba(81, 238, 255, 0.95)",glareColor:"rgba(255,255,255,0.08)",gridColor:"rgba(0, 229, 255, 0.06)"},this.x=e,this.y=a,this.w=s,this.h=n,this.ctx=t,this.off=document.createElement("canvas"),this.off.width=2*s,this.off.height=2*n;const o=this.off.getContext("2d",{alpha:!0});this.offCtx=o}static format(t){const e=Math.floor(t/10)%100,a=Math.floor(t/1e3)%60,s=Math.floor(t/6e4);if(s>99)return["99","99","99"];const n=t=>t<10?"0"+t:""+t;return[n(s),n(a),n(e)]}draw(t,e=performance.now()){const s=this.ctx,{textSize:n,bgColor:o,bgStrokeColor:r,textColor:i}=this.stopwatchStyle,l=this.offCtx,d=this.off.width,h=this.off.height;l.clearRect(0,0,this.off.width,this.off.height),this.drawGrid(l,0,0,d,h,16);const c=Math.min(.45*h,18);this.drawFrame(l,0,0,d,h,c),l.save(),l.font=`400 ${n}px "Quadaptor", ui-monospace, monospace`,l.fillStyle=i;const u=d/2,g=h/2;this.drawTimerDigits(l,a.format(t),u,g,.7*n);const{x:m,y:p,w:f,h:b}=this;s.save(),s.globalCompositeOperation="lighter",s.drawImage(this.off,m,p,f,b),s.restore()}drawGrid(t,e,a,s,n,o){const{gridColor:r}=this.stopwatchStyle;t.save(),t.strokeStyle=r,t.lineWidth=1,t.beginPath();for(let r=Math.floor(e/o)*o;r<e+s;r+=o)t.moveTo(r+.5,a),t.lineTo(r+.5,a+n);for(let r=Math.floor(a/o)*o;r<a+n;r+=o)t.moveTo(e,r+.5),t.lineTo(e+s,r+.5);t.stroke(),t.restore()}drawScanline(t,e,a,s,n,o){t.save(),t.beginPath(),this.drawFrame(t,e,a,s,n,Math.min(.45*n,18)),t.clip();const r=t.createLinearGradient(0,a,0,a+n);r.addColorStop(0,"rgba(255,255,255,0.00)"),r.addColorStop(.15,"rgba(255,255,255,0.02)"),r.addColorStop(.5,"rgba(255,255,255,0.06)"),r.addColorStop(.85,"rgba(255,255,255,0.02)"),r.addColorStop(1,"rgba(255,255,255,0.00)");const i=o/1e3*20,l=Math.sin(i)*(.1*n);t.globalCompositeOperation="lighter",t.fillStyle=r,t.fillRect(e,a+l,s,n),t.restore()}drawTopGlare(t,e,a,s,n){const{glareColor:o}=this.stopwatchStyle;t.save(),this.drawFrame(t,e,a,s,n,Math.min(.45*n,18)),t.clip();const r=Math.max(2,.16*n),i=t.createLinearGradient(0,a,0,a+r);i.addColorStop(0,o),i.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=i,t.fillRect(e,a,s,r),t.restore()}drawFrame(t,e,a,s,n,o){const{bgColor:r,bgStrokeColor:i,bgStrokeColorDim:l}=this.stopwatchStyle;t.save(),this.drawRoundRect(t,e+4,a+4,s-8,n-8,o),t.strokeStyle=l,t.lineWidth=3,t.stroke(),this.drawRoundRect(t,e+8,a+8,s-16,n-16,o),t.fillStyle=r,t.fill(),t.strokeStyle=i,t.lineWidth=4,t.stroke(),this.drawRoundRect(t,e+20,a+20,s-40,n-40,o-6),t.strokeStyle=l,t.lineWidth=.75,t.stroke(),t.restore()}drawRoundRect(t,e,a,s,n,o){const r=Math.min(o,s/2,n/2);t.beginPath(),t.moveTo(e+r-2,a-2),t.lineTo(e+s-r,a-2),t.arcTo(e+s+2,a-2,e+s+2,a+2+r,r),t.lineTo(e+s+2,a+n+2-r),t.arcTo(e+s+2,a+n+2,e+s+2-r,a+n+2,r),t.lineTo(e+r,a+n+2),t.arcTo(e-2,a+n+2,e-2,a+n+2-r,r),t.lineTo(e-2,a-2+r),t.arcTo(e-2,a-2,e-2+r,a-2,r)}drawTimerDigits(t,e,a,s,n){const o=t.measureText(":").width,r=t.measureText(".").width,i=6*n+o+r;t.save(),t.textBaseline="middle",t.textAlign="center";let l=a-i/2+n/2;t.fillText(e[0][0],l,s),l+=n,t.fillText(e[0][1],l,s),l+=(n+o)/2,t.fillText(":",l,s),l+=(n+o)/2,t.fillText(e[1][0],l,s),l+=n,t.fillText(e[1][1],l,s),l+=(n+r)/2,t.fillText(".",l,s),l+=(n+r)/2,t.fillText(e[2][0],l,s),l+=n,t.fillText(e[2][1],l,s),t.restore()}}e.NeonStopwatch=a},735:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=void 0,e.Timer=class{constructor(t,e){this._fps=t,this._loopFn=e,this.time=0,this.globalCurTime=-1,this.animationFrameId=-1,this.isOn=!1}getTime(){return this.time}start(){if(this.isOn)return;this.isOn=!0;const t=e=>{const a=e;a-this.globalCurTime>1e3/this._fps&&(this.time+=a-this.globalCurTime,this.globalCurTime=a,this._loopFn(this.time)),this.animationFrameId=requestAnimationFrame(t)};this.globalCurTime=performance.now(),this.animationFrameId=requestAnimationFrame(t)}stop(){this.isOn&&(this.isOn=!1,cancelAnimationFrame(this.animationFrameId))}}},749:function(t,e,a){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=a(267),o=s(a(373)),r=s(a(108));class i extends o.default{constructor(t){super(t)}display(){const t=n.manager.state.settings.mode,e=n.manager.state.settings.timeattackLevel;this.root.innerHTML=`\n            <section class="screen-title" data-screen>\n                <h1>Planarize!</h1>\n                <p>\n                    ランダムに生成された <strong>平面的グラフ</strong> を乱した配置から開始します。<br />\n                    ノードをドラッグして <strong>辺の交差をなくす</strong> ことを目指しましょう。\n                </p>\n\n                <input id="switch_advance" aria-invalid="true" type="checkbox" role="switch"/>\n\n                \x3c!-- アドバンスモードモーダル --\x3e\n                <dialog id="modal_advance_on">\n                    <article>\n                        <h2>Confirm</h2>\n                        <p>ブラウザにデータを保存しますか？</p>\n                        <footer>\n                            <button id="advence_yes">はい</button>\n                            <button id="advence_no" class="secondary">いいえ</button>\n                        </footer>\n                    </article>\n                </dialog>\n                <dialog id="modal_advance_off">\n                    <article>\n                        <h2>Warning!</h2>\n                        <p>過去の結果データが削除されます。続けますか？</p>\n                        <footer>\n                            <button id="advence_continue" class="pico-background-red-450">続ける</button>\n                            <button id="advence_cancel" class="secondary">キャンセル</button>\n                        </footer>\n                    </article>\n                </dialog>\n\n                <form id="title-form" autocomplete="off">\n                    <fieldset>\n                        <label for="name">\n                            ニックネーム（10文字以内）\n                            <input id="name" type="text" value=${n.manager.state.settings.name} maxlength="10" placeholder="ニックネームを入れてください">\n                        </label>\n                        <div class="mode-tabs-wrap" role="tablist" aria-label="ゲームモード">\n                            <div class="mode-tabs">\n                                <input type="radio" id="tab_time" name="mode" class="mode-tab" value="time" ${"timeattack"==n.manager.state.settings.mode?"checked":""}>\n                                <label for="tab_time" role="tab" aria-controls="panel_time" aria-selected="true">タイムアタック</label>\n\n                                <input type="radio" id="tab_arcade" name="mode" class="mode-tab" value="arcade" ${"arcade"==n.manager.state.settings.mode?"checked":""}>\n                                <label for="tab_arcade" role="tab" aria-controls="panel_arcade" aria-selected="false">アーケード</label>\n                            </div>\n\n                            <section id="panel_time" role="tabpanel">\n                                <label for="level">\n                                    レベル\n                                    <select id="level_time" class="dropdown">\n                                        <option value="easy" ${"easy"==n.manager.state.settings.timeattackLevel?"selected":""}>\n                                                イージー\n                                        </option>\n                                        <option value="normal" ${"normal"==n.manager.state.settings.timeattackLevel?"selected":""}>\n                                                ノーマル\n                                        </option>\n                                        <option value="hard" ${"hard"==n.manager.state.settings.timeattackLevel?"selected":""}>\n                                                ハード\n                                        </option>\n                                    </select>\n                                </label>\n                            </section>\n                            <section id="panel_arcade" role="tabpanel">\n                                <label for="vcount">\n                                    <p id="display_level">レベル：${n.manager.state.settings.arcadeLevel}</p>\n                                    <input\n                                        id="level_arcade"\n                                        type="range"\n                                        min="1"\n                                        max="10"\n                                        value="${n.manager.state.settings.arcadeLevel}"\n                                        required\n                                    />\n                                </label>\n                            </section>\n                        </div>\n                    </fieldset>\n\n                    <button type="button" id="btn_gamestart">スタート</button>\n                </form>\n\n                \x3c!-- <details id="howto">\n                    <summary>遊び方</summary>\n                    <ul>\n                        <li>ノードをドラッグして位置を調整します。</li>\n                        <li>レーザーどうしの交差数が <strong>0</strong> になればクリア！</li>\n                    </ul>\n                </details> --\x3e\n            </section>\n            <section class="screen-result">\n                <h2>結果</h2>\n\n                <input type="radio" id="resulttab_time_easy" name="result" class="result-tab" ${"timeattack"==t&&"easy"==e?"checked":""}>\n                <label for="resulttab_time_easy" role="tab" aria-controls="result_metrics" aria-selected="true">タイムアタック［イージー］</label>\n\n                <input type="radio" id="resulttab_time_normal" name="result" class="result-tab" ${"timeattack"==t&&"normal"==e?"checked":""}>\n                <label for="resulttab_time_normal" role="tab" aria-controls="result_metrics" aria-selected="true">タイムアタック［ノーマル］</label>\n\n                <input type="radio" id="resulttab_time_hard" name="result" class="result-tab" ${"timeattack"==t&&"hard"==e?"checked":""}>\n                <label for="resulttab_time_hard" role="tab" aria-controls="result_metrics" aria-selected="true">タイムアタック［ハード］</label>\n\n                <input type="radio" id="resulttab_arcade" name="result" class="result-tab" ${"arcade"==t?"checked":""}>\n                <label for="resulttab_arcade" role="tab" aria-controls="result_metrics_arcade" aria-selected="false">アーケード</label>\n                \x3c!-- タイムアタックランキング --\x3e\n                <section id="panel_result_time_easy" role="tabpanel">\n                    <table class="result-metrics">\n                        <thead>\n                            <tr>\n                                <th>順位</th>\n                                <th>名前</th>\n                                <th colspan="6">タイム</th>\n                            </tr>\n                            <tr>\n                                <th></th>\n                                <th></th>\n                                <th>合計</th>\n                                <th>ラウンド１</th>\n                                <th>ラウンド２</th>\n                                <th>ラウンド３</th>\n                                <th>ラウンド４</th>\n                                <th>ラウンド５</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${r.default.createTimeattackResultHTML("easy")}\n                        </tbody>\n                    </table>\n                </section>\n                <section id="panel_result_time_normal" role="tabpanel">\n                    <table class="result-metrics">\n                        <thead>\n                            <tr>\n                                <th>順位</th>\n                                <th>名前</th>\n                                <th colspan="6">タイム</th>\n                            </tr>\n                            <tr>\n                                <th></th>\n                                <th></th>\n                                <th>合計</th>\n                                <th>ラウンド１</th>\n                                <th>ラウンド２</th>\n                                <th>ラウンド３</th>\n                                <th>ラウンド４</th>\n                                <th>ラウンド５</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${r.default.createTimeattackResultHTML("normal")}\n                        </tbody>\n                    </table>\n                </section>\n                <section id="panel_result_time_hard" role="tabpanel">\n                    <table class="result-metrics">\n                        <thead>\n                            <tr>\n                                <th>順位</th>\n                                <th>名前</th>\n                                <th colspan="6">タイム</th>\n                            </tr>\n                            <tr>\n                                <th></th>\n                                <th></th>\n                                <th>合計</th>\n                                <th>ラウンド１</th>\n                                <th>ラウンド２</th>\n                                <th>ラウンド３</th>\n                                <th>ラウンド４</th>\n                                <th>ラウンド５</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${r.default.createTimeattackResultHTML("hard")}\n                        </tbody>\n                    </table>\n                </section>\n\n                \x3c!-- アーケード結果 --\x3e\n                <section id="panel_result_arcade" role="tabpanel">\n                    <table class="result-metrics-arcade">\n                        <thead>\n                            <tr>\n                                <th>レベル</th>\n                                <th>名前</th>\n                                <th>タイム</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${r.default.createArcadeResultHTML()}\n                        </tbody>\n                    </table>\n                </section>\n            </section>`;const a=document.getElementById("switch_advance");n.manager.state.settings.advMode&&(a.checked=!0);const s=document.getElementById("modal_advance_on"),o=document.getElementById("modal_advance_off");a.addEventListener("change",()=>{a.checked?s.open=!0:o.open=!0}),document.getElementById("advence_yes").addEventListener("click",()=>{s.open=!1,window.localStorage?(n.manager.state.settings.advMode=!0,window.localStorage.setItem("adv","true")):a.checked=!1}),document.getElementById("advence_no").addEventListener("click",()=>{s.open=!1,a.checked=!1}),document.getElementById("advence_continue").addEventListener("click",()=>{o.open=!1,n.manager.state.settings.advMode=!1,window.localStorage.clear()}),document.getElementById("advence_cancel").addEventListener("click",()=>{o.open=!1,a.checked=!0});const i=document.getElementById("display_level"),l=document.getElementById("level_arcade");l.addEventListener("input",()=>{i.innerText="レベル："+l.value}),document.getElementById("btn_gamestart").addEventListener("click",()=>{const t=document.getElementById("name").value;if(0==t.length)return;const e=document.getElementById("level_time").value,a=Number(document.getElementById("level_arcade").value),s=document.getElementsByName("mode");for(const t of s)if(t.checked)switch(t.value){case"time":n.manager.state.settings.mode="timeattack";break;case"arcade":n.manager.state.settings.mode="arcade"}n.manager.state.settings.name=t,n.manager.state.settings.timeattackLevel=e,n.manager.state.settings.arcadeLevel=a,n.manager.goto("game")})}}e.default=i},763:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ReverseQueue=void 0,e.ReverseQueue=class{constructor(t,e){this._size=void 0,this._size=e,this._queue=t||[]}push(t){this._queue.unshift(t),this._size&&this._queue.length>this._size&&this.pop()}pop(){this._queue.pop()}range(){return[...this._queue]}}}},e={};!function a(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,a),o.exports}(267)})();