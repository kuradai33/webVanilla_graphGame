(()=>{"use strict";var t={55:function(t,e,o){var i,r=this&&this.__createBinding||(Object.create?function(t,e,o,i){void 0===i&&(i=o);var r=Object.getOwnPropertyDescriptor(e,o);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[o]}}),Object.defineProperty(t,i,r)}:function(t,e,o,i){void 0===i&&(i=o),t[i]=e[o]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||(i=function(t){return i=Object.getOwnPropertyNames||function(t){var e=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[e.length]=o);return e},i(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o=i(t),a=0;a<o.length;a++)"default"!==o[a]&&r(e,t,o[a]);return s(e,t),e}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Gamepage=void 0;const l=a(o(407)),h=o(731),c=n(o(373));class d extends c.default{constructor(t){super(t),this.animationStartTime=-1,this.animationCurTime=-1,this.animationFrameId=-1,this.cntNode=-1,this.events=[],this.animationFPS=60,this.canvasSize={height:500,width:500},this.bgColor="#0b0f1a",this.bgGridStyle={origin:{y:this.canvasSize.height/2,x:this.canvasSize.width/2},grid:{height:80,width:80},color:"#111829",lineWidth:1},this.controller=new AbortController,this.signal=this.controller.signal}set callback(t){this._callback=t}display(t={cntNode:10}){this.root.innerHTML='\n            <section class="screen-game">\n                <h1>Graph to Plain!</h1>\n                <canvas id="game_playground"></canvas>\n                <p id="info"></p>\n            </section>',this.cntNode=t.cntNode,this.gameScreen=document.getElementById("game_playground"),this.textInfo=document.getElementById("info"),this.controller=new AbortController,this.signal=this.controller.signal,this.events=[];const e=this.gameScreen.getContext("2d");this.ctx=e;const{height:o,width:i}=this.canvasSize;this.gameScreen.height=o,this.gameScreen.width=i,this.stopwatch=new h.NeonStopwatch(e,i-180-10,o-48-10,180,48);const r=new l.Graph(e);this.createPlanegraph(r,t.cntNode),r.loop(0),this.settingCanvasEvent(r),this.animationStartTime=performance.now();const s=t=>{var o;const i=t;-1==this.animationCurTime&&(this.animationCurTime=i),i-this.animationCurTime>1e3/this.animationFPS&&(this.animationCurTime=i,e.clearRect(0,0,this.canvasSize.height,this.canvasSize.width),this.drawBackground(),r.loop(this.animationCurTime),null===(o=this.stopwatch)||void 0===o||o.draw(t-this.animationStartTime)),this.animationFrameId=requestAnimationFrame(s)};this.animationFrameId=requestAnimationFrame(s)}drawBackground(){const{height:t,width:e}=this.canvasSize,{origin:o,grid:i,color:r,lineWidth:s}=this.bgGridStyle,a=this.ctx;if(!a)throw new Error("Property is unsetted");a.fillStyle=this.bgColor,a.fillRect(0,0,e,t);for(let t=0;o.x+i.width*t<=e;t++)this.drawVerticalLine(o.x+i.width*t,r,s,a);for(let t=1;o.x-i.width*t>=0;t++)this.drawVerticalLine(o.x-i.width*t,r,s,a);for(let e=0;o.y+i.height*e<=t;e++)this.drawHorizontalLine(o.y+i.height*e,r,s,a);for(let t=1;o.y-i.height*t>=0;t++)this.drawHorizontalLine(o.y-i.height*t,r,s,a)}drawVerticalLine(t,e,o,i){i.strokeStyle=e,i.lineWidth=o,i.beginPath(),i.moveTo(t,0),i.lineTo(t,this.canvasSize.height),i.stroke()}drawHorizontalLine(t,e,o,i){i.strokeStyle=e,i.lineWidth=o,i.beginPath(),i.moveTo(0,t),i.lineTo(this.canvasSize.width,t),i.stroke()}settingCanvasEvent(t){if(!this.gameScreen)throw new Error("Property is unsetted");let e=!1,o=0,i=0,r=0,s=0,a=null;this.setEvent(this.gameScreen,"mousedown",n=>{if(!this.gameScreen)throw new Error("Property is unsetted");const l=this.gameScreen.getBoundingClientRect(),h=n.clientX-l.left,c=n.clientY-l.top;o=h,i=c,a=t.getClosestNode(h,c),a&&(a.status="drag");const d=null==a?void 0:a.getPos();null!=d&&(r=d[0],s=d[1]),e=!0},{signal:this.signal}),this.setEvent(this.root,"mousemove",t=>{if(!e)return;if(!this.gameScreen)throw new Error("Property is unsetted");const n=this.gameScreen.getBoundingClientRect(),l=t.clientX-n.left,h=t.clientY-n.top,c=Math.min(Math.max(l-o+r,18),this.canvasSize.width-18),d=Math.min(Math.max(h-i+s,18),this.canvasSize.height-18);null==a||a.setPos(c,d)}),this.setEvent(this.root,"mouseup",o=>{e&&(a&&(a.status="normal"),e=!1,t.checkCrossedGraph()||this.finishGame(t))})}setEvent(t,e,o,i){i?(t.addEventListener(e,o,i),this.events.push([t,e,o,i])):(t.addEventListener(e,o),this.events.push([t,e,o,null]))}createPlanegraph(t,e){const o=t.getCtx(),i=e;let r=null;for(let e=0;e<i;e++){let i=460*Math.random()+20,s=460*Math.random()+20;const a=new l.GraphNode(o,i,s,e);t.addGraphElement(a),0==this.getRandint(0,2)&&null!=r&&t.addGraphElement(new l.GraphEdge(o,r,a)),r=a}const s=t.getNodes(),a=this.createPlanegraphEdges(i);for(const e of a)t.addGraphElement(new l.GraphEdge(o,s[e[0]],s[e[1]]));this.textInfo&&(this.textInfo.innerText=`node:${i} edge:${a.length}`)}createPlanegraphEdges(t){let e=[],o=[],i=0;for(;i<1e3;){const r=0==this.getRandint(0,2),s=this.getRandint(0,t-2),a=[s,this.getRandint(s+2,t)];if(r&&this.checkCrossing(e,a))e.push(a);else{if(!this.checkCrossing(o,a)){i++;continue}o.push(a)}i=0}return console.log(e.sort()),console.log("-----"),console.log(o.sort()),e.concat(o)}checkCrossing(t,e){for(const o of t){const t=o[0]<=e[0]&&e[1]<=o[1],i=e[0]<=o[0]&&o[1]<=e[1];if(e[0]==o[0]&&o[1]==e[1]||!t&&!i)return!1}return!0}getRandint(t,e){if(t>e){const o=t;t=e,e=o}return Math.floor(Math.random()*(e-t))+t}finishGame(t){this.controller.abort(),cancelAnimationFrame(this.animationFrameId),t.drawClearedGraph();for(const t of this.events)t[3]?t[0].removeEventListener(t[1],t[2],t[3]):t[0].removeEventListener(t[1],t[2]);if(!this._callback)throw new Error("Property is unsetted");this._callback({time:"3:00.00",cntNode:this.cntNode})}}e.Gamepage=d},108:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Resultpage=void 0;const r=i(o(373));class s extends r.default{constructor(t){super(t),this.cntNode=-1}set callback(t){this._callback=t}display(t={time:"--:--.--",cntNode:10}){this.root.innerHTML='\n            <section class="screen-result">\n                <h2>結果</h2>\n\n                \x3c!-- 概要カード --\x3e\n                <article id="result-summary" aria-busy="true">\n                    \x3c!-- タイトル・要約などを動的に挿入 --\x3e\n                </article>\n\n                \x3c!-- メトリクス（任意数のKPIを自由に表示） --\x3e\n                <h3>メトリクス</h3>\n                <table id="result-metrics">\n                    <thead>\n                        <tr><th>項目</th><th>値</th></tr>\n                    </thead>\n                    <tbody>\n                        \x3c!-- 動的に挿入 --\x3e\n                    </tbody>\n                </table>\n\n                \x3c!-- セクション（任意数、配列で増減可能） --\x3e\n                <div id="result-sections">\n                    \x3c!-- 動的に <article> や <details> を追加 --\x3e\n                </div>\n\n                <footer style="margin-top:1rem;">\n                    <button type="button" id="btn_retry">もう一度</button>\n                    <button type="button" id="btn_backtitle" class="secondary">タイトルへ</button>\n                </footer>\n            </section>',this.cntNode=t.cntNode,document.getElementById("btn_retry").addEventListener("click",()=>{if(!this._callback)throw new Error("Property is unsetted");this._callback({page:"game",data:{cntNode:this.cntNode}})}),document.getElementById("btn_backtitle").addEventListener("click",()=>{if(!this._callback)throw new Error("Property is unsetted");this._callback({page:"title"})})}}e.Resultpage=s},267:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(o(620)),s=document.getElementById("page");function a(){const t=document.documentElement.getAttribute("data-theme")||"light";document.documentElement.setAttribute("data-theme","light"===t?"dark":"light")}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("switch_mode");null==t||t.addEventListener("click",a),new r.default(s,"title")})},373:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.root=t}}},407:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.GraphEdge=e.GraphNode=void 0;const i=o(613);class r{loop(t){}}class s extends r{constructor(t,e,o,i){super(),this.lastDragedTime=-1,this.prevStatus="normal",this.status="normal",this.graphicGlow=document.createElement("canvas"),this.graphicShadow=document.createElement("canvas"),this.neonColor={core:"#00e5ff",ring:"#0083c4",glowInner:"rgba(0,229,255,0.85)",glowOuter:"rgba(0,229,255,0.0)"},this.neonStyle={radius:18,ringWidth:5,glowRadius:30,pulse:!0,pulsePeriodMS:2e3},this.ctx=t,this.center_x=e,this.center_y=o,this.id=i;const{glowInner:r,glowOuter:s}=this.neonColor,{radius:a,glowRadius:n}=this.neonStyle;this.graphicGlow.height=2*n,this.graphicGlow.width=2*n;const l=n,h=n,c=this.graphicGlow.getContext("2d"),d=c.createRadialGradient(l,h,0,l,h,n);d.addColorStop(0,r),d.addColorStop(1,s),c.fillStyle=d,c.beginPath(),c.arc(l,h,n,0,2*Math.PI),c.fill(),this.graphicShadow.height=2*n,this.graphicShadow.width=2*n;const g=this.graphicShadow.getContext("2d"),p=g.createRadialGradient(l,h,0,l,h,n);p.addColorStop(0,"rgba(255,225,255,0)"),p.addColorStop(.15,"rgba(255,225,255,0.02)"),p.addColorStop(1,"rgba(255,225,255,0.7)"),g.fillStyle=p,g.beginPath(),g.arc(l,h,a,0,2*Math.PI),g.fill()}getPos(){return[this.center_x,this.center_y]}setPos(t,e){this.center_x=t,this.center_y=e}getDist(t,e){return Math.sqrt((this.center_x-t)**2+(e-this.center_y)**2)}loop(t){"drag"==this.prevStatus&&"normal"==this.status&&(this.lastDragedTime=t),this.prevStatus=this.status,this.draw(t)}draw(t){const e=this.ctx,o=this.center_x,i=this.center_y,{core:r,ring:s}=this.neonColor,{radius:a,ringWidth:n,glowRadius:l,pulse:h,pulsePeriodMS:c}=this.neonStyle,d=h?1+.1*Math.cos((t-this.lastDragedTime)/c*Math.PI*2):1,g=l*("drag"===this.status?1.1:d);e.save(),e.globalCompositeOperation="lighter",e.drawImage(this.graphicGlow,o-g,i-g,2*g,2*g),e.restore(),e.fillStyle=r,this.ctx.beginPath(),this.ctx.arc(o,i,a,0,2*Math.PI),this.ctx.fill(),e.strokeStyle=s,e.lineWidth=n,e.beginPath(),e.arc(o,i,.375*a+n,0,2*Math.PI),e.stroke(),e.save(),e.globalCompositeOperation="lighter",e.drawImage(this.graphicShadow,o-l,i-l,2*l,2*l),e.restore()}}e.GraphNode=s;class a extends r{constructor(t,e,o){super(),this.status="normal",this.normalStyle={coreAlpha:.3,coreWidth:1,colorWidth:3,solvedBoost:1.2,dash:{pattern:[7,7],speed:10},bright:{span:200,speed:100,colorBright:"#40efffff",colorDim:"#00262bff"}},this.alertStyle={coreAlpha:.3,coreWidth:1,colorWidth:3,solvedBoost:1.2,dash:{pattern:[7,7],speed:0},bright:{span:200,speed:0,colorBright:"#926900ff",colorDim:"#926900ff"}},this.ctx=t,this.node1=e,this.node2=o}loop(t){this.draw(t)}draw(t){const[e,o]=this.node1.getPos(),[i,r]=this.node2.getPos(),{coreAlpha:s,coreWidth:a,colorWidth:n,solvedBoost:l,dash:h,bright:c}="alert"==this.status?this.alertStyle:this.normalStyle,d=this.ctx;d.save();const g=Math.atan2(r-o,i-e);d.globalCompositeOperation="lighter",d.translate(e,o),d.rotate(g);const p=Math.sqrt((i-e)*(i-e)+(r-o)*(r-o)),u=d.createLinearGradient(0,0,p,0),f=t/1e3*c.speed,m=f-Math.floor(f/c.span)*c.span;for(let t=0;;t++){if(c.span/2*t-m>p){const e=t-1,o=Math.round((1-(c.span/2*e-m)/p)/(c.span/2/p)*100);e%2==0?u.addColorStop(1,`color-mix(in srgb, ${c.colorBright} ${o}%, ${c.colorDim})`):u.addColorStop(1,`color-mix(in srgb, ${c.colorDim} ${o}%, ${c.colorBright})`);break}if(c.span/2*t-m<0){if(0<=c.span/2*(t+1)-m){const e=Math.round(-(c.span/2*t-m)/p/(c.span/2/p)*100);t%2==0?u.addColorStop(0,`color-mix(in srgb, ${c.colorBright} ${e}%, ${c.colorDim})`):u.addColorStop(0,`color-mix(in srgb, ${c.colorDim} ${e}%, ${c.colorBright})`)}}else u.addColorStop((c.span/2*t-m)/p,t%2==0?c.colorDim:c.colorBright)}d.fillStyle=u,d.fillRect(0,-n*l/2,p,n*l),d.restore(),d.save(),d.strokeStyle="#0b0f1a",d.lineWidth=n*l*1.2,d.lineDashOffset=-t/1e3*h.speed,d.setLineDash(h.pattern),this.strokeLine(d,e,o,i,r),d.restore(),d.save(),d.globalCompositeOperation="source-over",d.strokeStyle=`rgba(255,255,255,${s})`,d.lineWidth=a,this.strokeLine(d,e,o,i,r),d.restore()}strokeLine(t,e,o,i,r){t.beginPath(),t.moveTo(e,o),t.lineTo(i,r),t.stroke()}checkCrossed(t){const[e,o]=this.node1.getPos(),[i,r]=this.node2.getPos(),[s,a]=t.node1.getPos(),[n,l]=t.node2.getPos();if(((e-i)*(a-o)-(o-r)*(s-e))*((e-i)*(l-o)-(o-r)*(n-e))>0)return null;if(((s-n)*(o-a)-(a-l)*(e-s))*((s-n)*(r-a)-(a-l)*(i-s))>0)return null;const h=((o-l)*(s-n)-(e-n)*(a-l))/((o-r)*(s-n)-(e-i)*(a-l));return{y:h*(r-o)+o,x:h*(i-e)+e}}checkNeighbor(t){return this.node1==t.node1||this.node1==t.node2||this.node2==t.node1||this.node2==t.node2}}e.GraphEdge=a,e.Graph=class{constructor(t){this.graphNodes=[],this.graphEdges=[],this.spackRenderer=new i.SparkRenderer,this.graphicGlow=document.createElement("canvas"),this.ctx=t,this.spackRenderer.ctx=t;const e=this.graphicGlow;e.width=e.height=64;const o=e.getContext("2d"),r=o.createRadialGradient(32,32,0,32,32,24);r.addColorStop(0,"rgba(255,255,255,1)"),r.addColorStop(1,"rgba(255,255,255,0)"),o.fillStyle=r,o.beginPath(),o.arc(32,32,24,0,2*Math.PI),o.fill(),this.graphicGlow=e}getNodes(){return this.graphNodes}getCtx(){return this.ctx}addGraphElement(t){t instanceof s?this.graphNodes.push(t):t instanceof a&&this.graphEdges.push(t)}updateEdgeStatus(){const t=this.checkCrossedEdges(),e=this.graphEdges.length;for(let o=0;o<e;o++)this.graphEdges[o].status=t[o]?"alert":"normal"}checkCrossedGraph(){return!this.checkCrossedEdges().every(t=>!t)}checkCrossedEdges(){const t=this.graphEdges.length;let e=Array(t).fill(!1);for(let o=0;o<t;o++)for(let i=o+1;i<t;i++)this.graphEdges[o].checkNeighbor(this.graphEdges[i])||this.graphEdges[o].checkCrossed(this.graphEdges[i])&&(e[o]=!0,e[i]=!0);return e}culEdgeIntersection(){const t=this.graphEdges.length;let e=[];for(let o=0;o<t;o++)for(let i=o+1;i<t;i++){if(this.graphEdges[o].checkNeighbor(this.graphEdges[i]))continue;const t=this.graphEdges[o].checkCrossed(this.graphEdges[i]);t&&e.push(t)}return e}loop(t){this.updateEdgeStatus();for(const e of this.graphEdges)e.loop(t);this.drawSpark(t);for(const e of this.graphNodes)e.loop(t)}drawSpark(t){const e=this.culEdgeIntersection();for(const t of e){const{x:e,y:o}=t;this.spackRenderer.emit(e,o)}this.spackRenderer.update(t/1e3),this.spackRenderer.draw()}getClosestNode(t,e){let o=1/0,i=null;for(const r of this.graphNodes){const s=r.getDist(t,e);console.log(`${r.id} ${s}`),o>s&&(o=s,i=r)}return i}drawClearedGraph(){console.log("fin")}}},613:(t,e)=>{function o(t,e){return t+Math.random()*(e-t)}function i(t,e){if(t.startsWith("#")){const o=t.substring(1),i=parseInt(3===o.length?o.split("").map(t=>t+t).join(""):o,16);return`rgba(${i>>16&255},${i>>8&255},${255&i},${e.toFixed(3)})`}return t.replace(/rgba?\(([^)]+)\)/,(t,o)=>{const i=o.split(",").map(t=>t.trim()),[r,s,a]=i;return`rgba(${r},${s},${a},${e.toFixed(3)})`})}Object.defineProperty(e,"__esModule",{value:!0}),e.SparkRenderer=void 0,e.SparkRenderer=class{constructor(){this.sparks=[],this.tmpGradCanvas=null,this.tmpShadowCanvas=null,this.prevTime=-1,this._ctx=void 0,this.sparkStyle={color:"#ffdd00",glow:"rgba(255, 255, 255, 0.95)",count:2,speedMin:15,speedMax:20,lifeMin:.1,lifeMax:.3,drag:.9,width:2,glowRadius:3,shadowRadius:25,len:8}}set ctx(t){this._ctx=t}emit(t,e){const i=this.sparkStyle;for(let r=0;r<i.count;r++){const r=Math.random()*Math.PI*2,s=o(i.speedMin,i.speedMax);this.sparks.push({x:t,y:e,vx:Math.cos(r)*s,vy:Math.sin(r)*s,t:0,life:o(i.lifeMin,i.lifeMax)})}this._ctx&&this.drawShadow(this._ctx,t,e,i.shadowRadius)}update(t){if(-1==this.prevTime)return void(this.prevTime=t);const e=t-this.prevTime;this.prevTime=t;const o=this.sparkStyle;for(let t=this.sparks.length-1;t>=0;t--){const i=this.sparks[t];i.t+=e,i.t>=i.life?this.sparks.splice(t,1):(i.vx*=o.drag,i.vy*=o.drag,i.x+=i.vx*e,i.y+=i.vy*e)}}draw(){const t=this._ctx;if(!t)throw new Error("描画先が設定されていません");if(0===this.sparks.length)return;const e=this.sparkStyle;t.save(),t.globalCompositeOperation="lighter",t.lineCap="round",t.lineWidth=e.width;for(const o of this.sparks){const r=1-o.t/o.life,s=Math.min(e.len,60*o.life),a=o.x-(0!==o.vx||0!==o.vy?o.vx/(Math.hypot(o.vx,o.vy)||1)*s:0),n=o.y-(0!==o.vy||0!==o.vx?o.vy/(Math.hypot(o.vx,o.vy)||1)*s:0);t.strokeStyle=i(e.color,.8*r),t.beginPath(),t.moveTo(a,n),t.lineTo(o.x,o.y),t.stroke(),this.drawGlow(t,o.x,o.y,e.glowRadius,Math.min(1,1.2*r))}t.restore()}drawGlow(t,e,o,i,r){if(!this.tmpGradCanvas){const t=document.createElement("canvas");t.width=t.height=64;const e=t.getContext("2d"),o=e.createRadialGradient(32,32,0,32,32,24);o.addColorStop(0,"rgba(255,255,255,1)"),o.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=o,e.beginPath(),e.arc(32,32,24,0,2*Math.PI),e.fill(),this.tmpGradCanvas=t}t.save(),t.globalCompositeOperation="lighter",t.globalAlpha=r,t.drawImage(this.tmpGradCanvas,e-i,o-i,2*i,2*i),t.globalAlpha=1,t.restore()}drawShadow(t,e,o,i){if(!this.tmpShadowCanvas){const t=document.createElement("canvas");t.width=t.height=64;const e=t.getContext("2d"),o=e.createRadialGradient(32,32,0,32,32,24);o.addColorStop(0,"rgba(22, 22, 22, 0.8)"),o.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=o,e.beginPath(),e.arc(32,32,24,0,2*Math.PI),e.fill(),this.tmpShadowCanvas=t}t.save(),t.globalCompositeOperation="source-over",t.drawImage(this.tmpShadowCanvas,e-i,o-i,2*i,2*i),t.restore()}}},620:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=o(749),r=o(55),s=o(108);e.default=class{constructor(t,e){const o=new i.Titlepage(t),a=new r.Gamepage(t),n=new s.Resultpage(t);o.callback=t=>{a.display(t)},a.callback=t=>{n.display(t)},n.callback=t=>{switch(t.page){case"title":o.display();break;case"game":a.display(t.data)}},this._pages={title:o,game:a,result:n},this._pages[e].display()}}},731:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NeonStopwatch=void 0;class o{constructor(t,e,o,i,r){this.stopwatchStyle={textSize:56,bgColor:"rgba(0, 45, 63, 0.6)",bgStrokeColor:"rgba(81, 238, 255, 0.95)",bgStrokeColorDim:"rgba(0, 229, 255, 0.25)",textColor:"rgba(81, 238, 255, 0.95)",glareColor:"rgba(255,255,255,0.08)",gridColor:"rgba(0, 229, 255, 0.06)"},this.x=e,this.y=o,this.w=i,this.h=r,this.ctx=t,this.off=document.createElement("canvas"),this.off.width=2*i,this.off.height=2*r;const s=this.off.getContext("2d",{alpha:!0});this.offCtx=s}static format(t){const e=Math.floor(t/10)%100,o=Math.floor(t/1e3)%60,i=Math.floor(t/6e4);if(i>99)return["99","99","99"];const r=t=>t<10?"0"+t:""+t;return[r(i),r(o),r(e)]}draw(t,e=performance.now()){const i=this.ctx,{textSize:r,bgColor:s,bgStrokeColor:a,textColor:n}=this.stopwatchStyle,l=this.offCtx,h=this.off.width,c=this.off.height;l.clearRect(0,0,this.off.width,this.off.height),this.drawGrid(l,0,0,h,c,16);const d=Math.min(.45*c,18);this.drawFrame(l,0,0,h,c,d),l.save(),l.font=`400 ${r}px "Quadaptor", ui-monospace, monospace`,l.fillStyle=n;const g=h/2,p=c/2;this.drawTimerDigits(l,o.format(t),g,p,.7*r);const{x:u,y:f,w:m,h:w}=this;i.save(),i.globalCompositeOperation="lighter",i.drawImage(this.off,u,f,m,w),i.restore()}drawGrid(t,e,o,i,r,s){const{gridColor:a}=this.stopwatchStyle;t.save(),t.strokeStyle=a,t.lineWidth=1,t.beginPath();for(let a=Math.floor(e/s)*s;a<e+i;a+=s)t.moveTo(a+.5,o),t.lineTo(a+.5,o+r);for(let a=Math.floor(o/s)*s;a<o+r;a+=s)t.moveTo(e,a+.5),t.lineTo(e+i,a+.5);t.stroke(),t.restore()}drawScanline(t,e,o,i,r,s){t.save(),t.beginPath(),this.drawFrame(t,e,o,i,r,Math.min(.45*r,18)),t.clip();const a=t.createLinearGradient(0,o,0,o+r);a.addColorStop(0,"rgba(255,255,255,0.00)"),a.addColorStop(.15,"rgba(255,255,255,0.02)"),a.addColorStop(.5,"rgba(255,255,255,0.06)"),a.addColorStop(.85,"rgba(255,255,255,0.02)"),a.addColorStop(1,"rgba(255,255,255,0.00)");const n=s/1e3*20,l=Math.sin(n)*(.1*r);t.globalCompositeOperation="lighter",t.fillStyle=a,t.fillRect(e,o+l,i,r),t.restore()}drawTopGlare(t,e,o,i,r){const{glareColor:s}=this.stopwatchStyle;t.save(),this.drawFrame(t,e,o,i,r,Math.min(.45*r,18)),t.clip();const a=Math.max(2,.16*r),n=t.createLinearGradient(0,o,0,o+a);n.addColorStop(0,s),n.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=n,t.fillRect(e,o,i,a),t.restore()}drawFrame(t,e,o,i,r,s){const{bgColor:a,bgStrokeColor:n,bgStrokeColorDim:l}=this.stopwatchStyle;t.save(),this.drawRoundRect(t,e+4,o+4,i-8,r-8,s),t.strokeStyle=l,t.lineWidth=3,t.stroke(),this.drawRoundRect(t,e+8,o+8,i-16,r-16,s),t.fillStyle=a,t.fill(),t.strokeStyle=n,t.lineWidth=4,t.stroke(),this.drawRoundRect(t,e+20,o+20,i-40,r-40,s-6),t.strokeStyle=l,t.lineWidth=.75,t.stroke(),t.restore()}drawRoundRect(t,e,o,i,r,s){const a=Math.min(s,i/2,r/2);t.beginPath(),t.moveTo(e+a-2,o-2),t.lineTo(e+i-a,o-2),t.arcTo(e+i+2,o-2,e+i+2,o+2+a,a),t.lineTo(e+i+2,o+r+2-a),t.arcTo(e+i+2,o+r+2,e+i+2-a,o+r+2,a),t.lineTo(e+a,o+r+2),t.arcTo(e-2,o+r+2,e-2,o+r+2-a,a),t.lineTo(e-2,o-2+a),t.arcTo(e-2,o-2,e-2+a,o-2,a)}drawTimerDigits(t,e,o,i,r){const s=t.measureText(":").width,a=t.measureText(".").width,n=6*r+s+a;t.save(),t.textBaseline="middle",t.textAlign="center";let l=o-n/2+r/2;t.fillText(e[0][0],l,i),l+=r,t.fillText(e[0][1],l,i),l+=(r+s)/2,t.fillText(":",l,i),l+=(r+s)/2,t.fillText(e[1][0],l,i),l+=r,t.fillText(e[1][1],l,i),l+=(r+a)/2,t.fillText(".",l,i),l+=(r+a)/2,t.fillText(e[2][0],l,i),l+=r,t.fillText(e[2][1],l,i),t.restore()}}e.NeonStopwatch=o},749:function(t,e,o){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Titlepage=void 0;const r=i(o(373));class s extends r.default{constructor(t){super(t)}set callback(t){this._callback=t}display(){this.root.innerHTML='\n            <section class="screen-title" data-screen>\n                <h1>Planarity Challenge</h1>\n                <p>\n                    ランダムに生成された <strong>平面的グラフ</strong> を乱した配置から開始します。<br />\n                    頂点をドラッグして <em>辺の交差をなくす</em> ことを目指しましょう。\n                </p>\n\n                <form id="title-form" autocomplete="off">\n                    <fieldset>\n                        <legend>ゲーム設定</legend>\n\n                        <label for="vcount">\n                            頂点数\n                            <input id="vcount" type="number" min="6" max="60" value="10" required />\n                        </label>\n                    </fieldset>\n\n                    <button type="button" id="btn_gamestart">ゲーム開始</button>\n                </form>\n\n                <details id="howto">\n                    <summary>遊び方</summary>\n                    <ul>\n                        <li>頂点をドラッグして位置を調整します。</li>\n                        <li>辺どうしの交差数が <strong>0</strong> になればクリアです。</li>\n                        <li>常に「元は平面的なグラフ」を使用しますが、配置を乱して開始します。</li>\n                    </ul>\n                </details>\n            </section>',document.getElementById("btn_gamestart").addEventListener("click",()=>{const t=Number(document.getElementById("vcount").value);if(!this._callback)throw new Error("Property is unsetted");this._callback({cntNode:t})})}}e.Titlepage=s}},e={};!function o(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,o),s.exports}(267)})();